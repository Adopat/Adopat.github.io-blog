<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker | Adopat的博客</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/blog/logo.jpeg">
    <link rel="manifest" href="/blog/logo.jpeg">
    <link rel="apple-touch-icon" href="/blog/logo.jpeg">
    <link rel="mask-icon" href="/blog/logo.jpeg" color="#3eaf7c">
    <meta name="description" content="长路漫漫，唯键作伴">
    <meta http-quiv="pragma" cotent="no-cache">
    <meta http-quiv="expires" cotent="0">
    <meta http-quiv="pragma" cotent="no-cache, must-revalidate">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta charset="utf-8">
    
    <link rel="preload" href="/blog/assets/css/0.styles.c74f429a.css" as="style"><link rel="preload" href="/blog/assets/js/app.f600c34c.js" as="script"><link rel="preload" href="/blog/assets/js/3.1aae9359.js" as="script"><link rel="preload" href="/blog/assets/js/1.ae8a88ec.js" as="script"><link rel="preload" href="/blog/assets/js/56.1962bc1e.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.d3b9c11d.js"><link rel="prefetch" href="/blog/assets/js/11.acb152df.js"><link rel="prefetch" href="/blog/assets/js/12.c8509742.js"><link rel="prefetch" href="/blog/assets/js/13.811061e2.js"><link rel="prefetch" href="/blog/assets/js/14.db6b0e70.js"><link rel="prefetch" href="/blog/assets/js/15.2ce37a4a.js"><link rel="prefetch" href="/blog/assets/js/16.b3452aec.js"><link rel="prefetch" href="/blog/assets/js/17.dc1a8405.js"><link rel="prefetch" href="/blog/assets/js/18.f03199ab.js"><link rel="prefetch" href="/blog/assets/js/19.bb1e396b.js"><link rel="prefetch" href="/blog/assets/js/20.4e2d0adb.js"><link rel="prefetch" href="/blog/assets/js/21.b67291e2.js"><link rel="prefetch" href="/blog/assets/js/22.057ea7c4.js"><link rel="prefetch" href="/blog/assets/js/23.70da62c2.js"><link rel="prefetch" href="/blog/assets/js/24.8cd404c5.js"><link rel="prefetch" href="/blog/assets/js/25.e637bb66.js"><link rel="prefetch" href="/blog/assets/js/26.bb3896ad.js"><link rel="prefetch" href="/blog/assets/js/27.021e6dc3.js"><link rel="prefetch" href="/blog/assets/js/28.6949fbc1.js"><link rel="prefetch" href="/blog/assets/js/29.6c652456.js"><link rel="prefetch" href="/blog/assets/js/30.f23dfdea.js"><link rel="prefetch" href="/blog/assets/js/31.3dcf5164.js"><link rel="prefetch" href="/blog/assets/js/32.b554bb64.js"><link rel="prefetch" href="/blog/assets/js/33.6ba9e186.js"><link rel="prefetch" href="/blog/assets/js/34.2ae1eb6a.js"><link rel="prefetch" href="/blog/assets/js/35.1fe5b5a2.js"><link rel="prefetch" href="/blog/assets/js/36.614599d6.js"><link rel="prefetch" href="/blog/assets/js/37.311ebd2c.js"><link rel="prefetch" href="/blog/assets/js/38.50bccc51.js"><link rel="prefetch" href="/blog/assets/js/39.fc5b9233.js"><link rel="prefetch" href="/blog/assets/js/4.1dd123be.js"><link rel="prefetch" href="/blog/assets/js/40.f5520796.js"><link rel="prefetch" href="/blog/assets/js/41.a23e6477.js"><link rel="prefetch" href="/blog/assets/js/42.1ad13e0e.js"><link rel="prefetch" href="/blog/assets/js/43.1235eb55.js"><link rel="prefetch" href="/blog/assets/js/44.e50bce95.js"><link rel="prefetch" href="/blog/assets/js/45.96aaada5.js"><link rel="prefetch" href="/blog/assets/js/46.f656cba5.js"><link rel="prefetch" href="/blog/assets/js/47.e170369f.js"><link rel="prefetch" href="/blog/assets/js/48.95e08a63.js"><link rel="prefetch" href="/blog/assets/js/49.eaea0707.js"><link rel="prefetch" href="/blog/assets/js/5.4cb445b4.js"><link rel="prefetch" href="/blog/assets/js/50.b1126e4d.js"><link rel="prefetch" href="/blog/assets/js/51.c28c85ff.js"><link rel="prefetch" href="/blog/assets/js/52.431357ea.js"><link rel="prefetch" href="/blog/assets/js/53.be380102.js"><link rel="prefetch" href="/blog/assets/js/54.5877a497.js"><link rel="prefetch" href="/blog/assets/js/55.e1d5dddb.js"><link rel="prefetch" href="/blog/assets/js/57.b7d9dbdd.js"><link rel="prefetch" href="/blog/assets/js/58.b5d9b427.js"><link rel="prefetch" href="/blog/assets/js/59.e07757a4.js"><link rel="prefetch" href="/blog/assets/js/6.e02ce0fc.js"><link rel="prefetch" href="/blog/assets/js/60.50d5d207.js"><link rel="prefetch" href="/blog/assets/js/61.2bdc68d5.js"><link rel="prefetch" href="/blog/assets/js/62.6f6c77db.js"><link rel="prefetch" href="/blog/assets/js/63.fd62d822.js"><link rel="prefetch" href="/blog/assets/js/64.d83a9500.js"><link rel="prefetch" href="/blog/assets/js/65.e76b3053.js"><link rel="prefetch" href="/blog/assets/js/66.de39f9b4.js"><link rel="prefetch" href="/blog/assets/js/67.44ce2347.js"><link rel="prefetch" href="/blog/assets/js/68.9efe46cd.js"><link rel="prefetch" href="/blog/assets/js/69.a06475fc.js"><link rel="prefetch" href="/blog/assets/js/7.3df43e48.js"><link rel="prefetch" href="/blog/assets/js/70.d38d05d7.js"><link rel="prefetch" href="/blog/assets/js/71.563b0c4a.js"><link rel="prefetch" href="/blog/assets/js/72.14bc1390.js"><link rel="prefetch" href="/blog/assets/js/73.9d176c78.js"><link rel="prefetch" href="/blog/assets/js/74.3a37688f.js"><link rel="prefetch" href="/blog/assets/js/75.7c4802f6.js"><link rel="prefetch" href="/blog/assets/js/76.7309aafa.js"><link rel="prefetch" href="/blog/assets/js/77.418b1686.js"><link rel="prefetch" href="/blog/assets/js/78.8b748ecf.js"><link rel="prefetch" href="/blog/assets/js/8.417a4fef.js"><link rel="prefetch" href="/blog/assets/js/9.28024d7d.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.c74f429a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1c636796><div data-v-1c636796><div class="password-shadow password-wrapper-out" style="display:none;" data-v-2c3e9f55 data-v-1c636796 data-v-1c636796><h3 class="title" data-v-2c3e9f55>Adopat的博客</h3> <p class="description" data-v-2c3e9f55>长路漫漫，唯键作伴</p> <label id="box" class="inputBox" data-v-2c3e9f55><input type="password" value="" data-v-2c3e9f55> <span data-v-2c3e9f55>Konck! Knock!</span> <button data-v-2c3e9f55>OK</button></label> <div class="footer" data-v-2c3e9f55><span data-v-2c3e9f55><i class="iconfont reco-theme" data-v-2c3e9f55></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-2c3e9f55>vuePress-theme-reco</a></span> <span data-v-2c3e9f55><i class="iconfont reco-copyright" data-v-2c3e9f55></i> <a data-v-2c3e9f55><span data-v-2c3e9f55>Adopat</span>
          
        <!---->
        2023
      </a></span></div></div> <div class="hide" data-v-1c636796><header class="navbar" data-v-1c636796><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/logo.jpeg" alt="Adopat的博客" class="logo"> <span class="site-name">Adopat的博客</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link"><i class="iconfont reco-home"></i>
  HOME
</a></div><div class="nav-item"><a href="/blog/handbook/about/" class="nav-link"><i class="iconfont reco-document"></i>
  导读
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/handbook/basic/composition-principle.html" class="nav-link"><i class="fa fa-solid fa-computer"></i>
  计算机基础
</a></li><li class="dropdown-item"><!----> <a href="/blog/handbook/frontend/basic.html" class="nav-link"><i class="fa fa-brands fa-js"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/blog/handbook/backend/java-core-basic.html" class="nav-link"><i class="fa fa-brands fa-java"></i>
  后端
</a></li><li class="dropdown-item"><!----> <a href="/blog/handbook/database/" class="nav-link"><i class="fa fa-solid fa-database"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/blog/handbook/bigdata/hadoop.html" class="nav-link"><i class="fa fa-brands fa-hive"></i>
  大数据
</a></li><li class="dropdown-item"><!----> <a href="/blog/handbook/ml/python-core.html" class="nav-link"><i class="fa fa-brands fa-python"></i>
  人工智能
</a></li><li class="dropdown-item"><!----> <a href="/blog/handbook/devops/docker.html" aria-current="page" class="nav-link router-link-exact-active router-link-active"><i class="fa fa-brands fa-docker"></i>
  运维
</a></li><li class="dropdown-item"><!----> <a href="/blog/handbook/tools/Git.html" class="nav-link"><i class="fa fa-solid fa-toolbox"></i>
  常用开发工具
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      友情链接
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/weixin_44446122?type=blog" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-csdn"></i>
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Adopat" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1c636796></div> <aside class="sidebar" data-v-1c636796><div class="personal-info-wrapper" data-v-6f92ba70 data-v-1c636796><!----> <h3 class="name" data-v-6f92ba70>
    Adopat
  </h3> <div class="num" data-v-6f92ba70><div data-v-6f92ba70><h3 data-v-6f92ba70>67</h3> <h6 data-v-6f92ba70>文章</h6></div> <div data-v-6f92ba70><h3 data-v-6f92ba70>0</h3> <h6 data-v-6f92ba70>标签</h6></div></div> <ul class="social-links" data-v-6f92ba70></ul> <hr data-v-6f92ba70></div> <nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link"><i class="iconfont reco-home"></i>
  HOME
</a></div><div class="nav-item"><a href="/blog/handbook/about/" class="nav-link"><i class="iconfont reco-document"></i>
  导读
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/handbook/basic/composition-principle.html" class="nav-link"><i class="fa fa-solid fa-computer"></i>
  计算机基础
</a></li><li class="dropdown-item"><!----> <a href="/blog/handbook/frontend/basic.html" class="nav-link"><i class="fa fa-brands fa-js"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/blog/handbook/backend/java-core-basic.html" class="nav-link"><i class="fa fa-brands fa-java"></i>
  后端
</a></li><li class="dropdown-item"><!----> <a href="/blog/handbook/database/" class="nav-link"><i class="fa fa-solid fa-database"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/blog/handbook/bigdata/hadoop.html" class="nav-link"><i class="fa fa-brands fa-hive"></i>
  大数据
</a></li><li class="dropdown-item"><!----> <a href="/blog/handbook/ml/python-core.html" class="nav-link"><i class="fa fa-brands fa-python"></i>
  人工智能
</a></li><li class="dropdown-item"><!----> <a href="/blog/handbook/devops/docker.html" aria-current="page" class="nav-link router-link-exact-active router-link-active"><i class="fa fa-brands fa-docker"></i>
  运维
</a></li><li class="dropdown-item"><!----> <a href="/blog/handbook/tools/Git.html" class="nav-link"><i class="fa fa-solid fa-toolbox"></i>
  常用开发工具
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      友情链接
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/weixin_44446122?type=blog" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-csdn"></i>
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Adopat" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>运维</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/handbook/devops/docker.html" aria-current="page" class="active sidebar-link">Docker</a></li><li><a href="/blog/handbook/devops/nginx.html" class="sidebar-link">Nginx</a></li><li><a href="/blog/handbook/devops/Kubernetes.html" class="sidebar-link">K8s教程</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-2c3e9f55 data-v-1c636796><h3 class="title" data-v-2c3e9f55></h3> <!----> <label id="box" class="inputBox" data-v-2c3e9f55><input type="password" value="" data-v-2c3e9f55> <span data-v-2c3e9f55>Konck! Knock!</span> <button data-v-2c3e9f55>OK</button></label> <div class="footer" data-v-2c3e9f55><span data-v-2c3e9f55><i class="iconfont reco-theme" data-v-2c3e9f55></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-2c3e9f55>vuePress-theme-reco</a></span> <span data-v-2c3e9f55><i class="iconfont reco-copyright" data-v-2c3e9f55></i> <a data-v-2c3e9f55><span data-v-2c3e9f55>Adopat</span>
          
        <!---->
        2023
      </a></span></div></div> <div data-v-1c636796><div data-v-1c636796><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">Docker</h1> <div data-v-6acedb3b><i class="iconfont reco-account" data-v-6acedb3b><span data-v-6acedb3b>Adopat</span></i> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="docker"><a href="#docker" class="header-anchor">#</a> Docker</h1> <h2 id="_1-docker基本概念"><a href="#_1-docker基本概念" class="header-anchor">#</a> 1.docker基本概念</h2> <h3 id="docker是什么"><a href="#docker是什么" class="header-anchor">#</a> Docker是什么</h3> <p>Docker 是一个开源的应用容器引擎，基于 Go 语言 并遵从 Apache2.0 协议开源。Docker 可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的 Linux 机器上，也可以实现虚拟化。容器是完全使用沙箱机制，相互之间不会有任何接口（类似 iPhone 的 app）,更重要的是容器性能开销极低。</p> <h3 id="项目部署的三个阶段"><a href="#项目部署的三个阶段" class="header-anchor">#</a> 项目部署的三个阶段</h3> <ol><li><p>物理机</p> <p>部署一个服务，会粗略估计服务所需要的机器性能，然后去采购对应的真实物理机器，然后在该机器上安装服务需要的一些软件，比如服务器Tomcat，数据库MySQL等等。</p> <blockquote><p>物理机时代缺点</p> <p>1、部署非常慢：采购机器，安装系统，安装软件等等；</p> <p>2、成本高以及资源浪费：通常为了以防服务性能不够，我们都会尽量采购比预期资源高一点的机器，不仅会增加成本，还会造成机器资源浪费；</p> <p>3、难于扩展与迁移：由于是真实的物理机，扩展或者迁移会比较麻烦；</p></blockquote></li> <li><p>虚拟机</p> <p>虚拟机能够在一台机器上创建多台机器，能够充分利用资源，并且也做到了机器之间的隔离，机器性能不够用了，也可以通过 Hypervisor 随时进行扩展。</p> <blockquote><p>虚拟机时代缺点</p> <p>每一台虚拟机都要独立安装操作系统，大家知道操作系统其实也是比较占用性能的，有多少台虚拟机，我们就得多安装多少个操作系统，这样就浪费了很多资源。</p></blockquote></li> <li><p>容器化</p> <p>可以把容器看做是不用安装操作系统的虚拟机，容器化技术比虚拟机更加灵活，更加小巧，更加极致的利用物理机资源。</p></li></ol> <h3 id="docker出现原因"><a href="#docker出现原因" class="header-anchor">#</a> Docker出现原因</h3> <ul><li><p>一次构建，到处运行</p> <p>通过 Docker 打包镜像发布测试，提供了一个标准化的解决方案，再也不用担心因为环境不一致而导致的服务部署问题。</p></li> <li><p>更高效的计算资源利用</p> <p>容器类似于 VM，但是它们具有被放宽的隔离属性，可以在应用程序之间共享操作系统（OS）。因此，容器被认为是轻量级的。容器与 VM  类似，具有自己的文件系统、CPU、内存、进程空间等。可以把容器看做是不用安装操作系统的虚拟机，容器化技术比虚拟机更加灵活，更加小巧，更加极致的利用物理机资源。</p> <blockquote><p>记住最重要的一点，Dokcer实际是宿主机的一个普通的进程，这也是Dokcer与传统虚拟化技术的最大不同。</p></blockquote></li></ul> <h3 id="docker优点"><a href="#docker优点" class="header-anchor">#</a> Docker优点</h3> <ul><li><p>部署快,开发测试更加敏捷</p> <p>通过Docker 打包镜像发布测试，一键运行。</p></li> <li><p>快速扩展机器</p> <p>由于Docker容器快速启动特性，可以很快速的启动几十个、上百个容器来提供更多并发和资源利用率，并且这么多容器也有比较成熟的解决方案来统一管理，比如K8S。</p></li> <li><p>提高系统利用率,降低硬件成本</p> <p>轻量级的虚拟机，更省资源。</p></li> <li><p>跨环境可移植</p></li> <li><p>更好的支持微服务</p> <p>微服务是近几年来IT圈内谈论比较多的一个名词，意义也很简单：尽可能细粒度拆分业务程序架构，由多个独立服务组成业务系统。</p> <p>而Docker的容器设计原则：一个容器一个服务，容器之间相互隔离，和微服务正好遥相呼应。</p></li> <li><p>应用运维标准化,支持不同语言系统</p></li> <li><p>避免云厂商锁定</p></li></ul> <h3 id="容器和虚拟机的区别"><a href="#容器和虚拟机的区别" class="header-anchor">#</a> 容器和虚拟机的区别</h3> <p>容器包括应用程序及其所有依赖项。容器运行时，与宿主机共享操作系统内核，容器在linux内核层面（使用 <a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Resource_Management_Guide/ch01.html" target="_blank" rel="noopener noreferrer">Cgroups<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 <a href="https://lwn.net/Articles/528078/" target="_blank" rel="noopener noreferrer">namespaces<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）来实现进程间的隔离，容器在主机操作系统上的用户空间中作为独立进程运行。</p> <p>因此，容器相比于虚拟机更加轻量化，它体积小，启动快，占用资源少，性能好。</p> <p>虚拟机使用虚拟化技术，应用程序运行在完整的操作系统（OS）之上，因此占用的资源更多，安装更复杂。</p> <p>但是由于容器与宿主机共享内核，所以在隔离性和安全性方面不如虚拟机。</p> <p><img src="/blog/docker.assets/image-20230807095538219.png" alt="image-20230807095538219"></p> <h3 id="docker学习网站"><a href="#docker学习网站" class="header-anchor">#</a> Docker学习网站</h3> <ul><li><a href="https://www.docker.com/" target="_blank" rel="noopener noreferrer">官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.docker.com/" target="_blank" rel="noopener noreferrer">官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://hub.docker.com" target="_blank" rel="noopener noreferrer">官方仓库地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://vuepress.mirror.docker-practice.com/" target="_blank" rel="noopener noreferrer">Docker从入门到实践<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docker.easydoc.net/doc/81170005/cCewZWoN/lTKfePfP" target="_blank" rel="noopener noreferrer">Docker 快速入门<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.yuque.com/wukong-zorrm/xwas40" target="_blank" rel="noopener noreferrer">docker一小时入门教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="_2-docker安装"><a href="#_2-docker安装" class="header-anchor">#</a> 2.docker安装</h2> <h3 id="docker卸载"><a href="#docker卸载" class="header-anchor">#</a> docker卸载</h3> <p>要在 CentOS 中完全卸载 Docker，您可以按照以下步骤进行操作：</p> <ol><li><p>停止所有正在运行的 Docker 容器。您可以使用以下命令停止所有容器：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> stop <span class="token variable"><span class="token variable">$(</span><span class="token function">sudo</span> <span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-aq</span><span class="token variable">)</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>停止服务</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>systemctl stop docker.service
systemctl stop docker.socket
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>删除所有的 Docker 容器。运行以下命令删除所有容器：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> <span class="token function">rm</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">sudo</span> <span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-aq</span><span class="token variable">)</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>删除所有的 Docker 镜像。执行以下命令删除所有镜像：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> rmi <span class="token variable"><span class="token variable">$(</span><span class="token function">sudo</span> <span class="token function">docker</span> images <span class="token parameter variable">-aq</span><span class="token variable">)</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>注意：这将删除所有已下载的 Docker 镜像，包括您自己构建的和来自 Docker Hub 的镜像。如果您希望保留某些镜像，请在执行此命令之前备份它们。</p></li> <li><p>卸载 Docker 引擎。执行以下命令卸载 Docker 包：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>yum remove docker-ce docker-ce-cli containerd.io
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>删除 Docker 的相关文件和目录。执行以下命令删除相关文件和目录：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">rm</span> <span class="token parameter variable">-rf</span> /var/lib/docker
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> /etc/docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>查看数据卷并删除</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 查看数据卷</span>
<span class="token function">docker</span> volume <span class="token function">ls</span>
<span class="token comment"># 删除数据卷</span>
<span class="token function">docker</span> volume <span class="token function">rm</span> <span class="token operator">&lt;</span>volume_name_or_id<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ol> <h3 id="在线安装"><a href="#在线安装" class="header-anchor">#</a> 在线安装</h3> <ul><li><p>查看centos版本</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@oracleflink ~<span class="token punctuation">]</span><span class="token comment"># cat /etc/centos-release</span>
CentOS Linux release <span class="token number">7.9</span>.2009 <span class="token punctuation">(</span>Core<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>查看当前的内核版本</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@oracleflink ~<span class="token punctuation">]</span><span class="token comment"># uname -r</span>
<span class="token number">3.10</span>.0-1160.80.1.el7.x86_64
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>内核版本不是3.10及以上的需要升级,<a href="https://www.linuxprobe.com/update-kernel-centos7.html" target="_blank" rel="noopener noreferrer">centos7升级内核方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote></li> <li><p>使用root权限更新yum包(非必须)</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>yum <span class="token parameter variable">-y</span> update
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>yum -y update:升级所有包同时也升级软件和系统内核</p> <p>yum -y upgrade:只升级所有包，不升级软件和系统内核</p> <p>注意:这个命令不是必须的，看个人情况，后面出现不兼容的情况的话就必须update了。</p></blockquote></li> <li><p>卸载旧版本(非必须)</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>yum remove <span class="token function">docker</span> docker-client docker-client-latest docker-common docker-latest docker-latest-logrotate docker-logrotate docker-engine
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>安装需要的软件包</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>yum <span class="token function">install</span> <span class="token parameter variable">-y</span> yum-utils device-mapper-persistent-data lvm2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>yum-util 提供 yum-config-manager功能</p> <p>device-mapper-persistent-data；lvm2是devicemapper驱动依赖</p></blockquote></li> <li><p>查看yum 仓库</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@oracleflink ~<span class="token punctuation">]</span><span class="token comment"># ll /etc/yum.repos.d/</span>
total <span class="token number">48</span>
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">1664</span> Nov <span class="token number">23</span>  <span class="token number">2020</span> CentOS-Base.repo
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">1309</span> Nov <span class="token number">23</span>  <span class="token number">2020</span> CentOS-CR.repo
-rw-r--r--. <span class="token number">1</span> root root  <span class="token number">649</span> Nov <span class="token number">23</span>  <span class="token number">2020</span> CentOS-Debuginfo.repo
-rw-r--r--. <span class="token number">1</span> root root  <span class="token number">314</span> Nov <span class="token number">23</span>  <span class="token number">2020</span> CentOS-fasttrack.repo
-rw-r--r--. <span class="token number">1</span> root root  <span class="token number">630</span> Nov <span class="token number">23</span>  <span class="token number">2020</span> CentOS-Media.repo
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">1331</span> Nov <span class="token number">23</span>  <span class="token number">2020</span> CentOS-Sources.repo
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">8515</span> Nov <span class="token number">23</span>  <span class="token number">2020</span> CentOS-Vault.repo
-rw-r--r--. <span class="token number">1</span> root root  <span class="token number">616</span> Nov <span class="token number">23</span>  <span class="token number">2020</span> CentOS-x86_64-kernel.repo
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">2081</span> Nov <span class="token number">15</span> <span class="token number">11</span>:13 docker-ce.repo
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">1946</span> Jul <span class="token number">10</span> <span class="token number">19</span>:08 elrepo.repo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><blockquote><p>如果用的厂商的服务器（阿里云、腾讯云）一般都会有docker仓库，如果用的是虚拟机或者公司的服务器基本s上没有。</p></blockquote></li> <li><p>设置docker,yum源</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>yum-config-manager --add-repo http://download.docker.com/linux/centos/docker-ce.repo
yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
yum-config-manager --add-repo https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/centos/docker-ce.repo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>上面两个地址三选一，Docker官方提供的Docker Registry镜像仓库是Docker  Hub，但是国内访问这些服务可能比较慢，因此国内的一些云服务商提供了针对Docker Hub的镜像服务（Registry  Mirror），这些镜像服务被称为加速器。使用加速器会直接从国内的地址下载Docker Hub的镜像。注意如果下载镜像较慢可以配置镜像加速服务 ，<a href="https://www.runoob.com/docker/docker-mirror-acceleration.html" target="_blank" rel="noopener noreferrer">配置镜像加速<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote></li> <li><p>配置镜像加速(非必须)</p> <div class="language-sehll line-numbers-mode"><pre class="language-text"><code>[root@oracleflink ~]# cat /etc/docker/daemon.json 
{
&quot;registry-mirrors&quot; : [
    &quot;https://docker.mirrors.ustc.edu.cn&quot;,
    &quot;https://hub-mirror.c.163.com&quot;,
    &quot;https://mirror.ccs.tencentyun.com&quot;,
    &quot;https://fsp2sfpr.mirror.aliyuncs.com/&quot;,
    &quot;https://registry.docker-cn.com&quot;
  ]
}
# 修改配置后需要重启docker 服务
[root@oracleflink ~]# systemctl restart docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><blockquote><p>常见的镜像加速器地址</p> <ul><li>Docker 中国官方镜像 https://registry.docker-cn.com</li> <li>DaoCloud 镜像站 http://f1361db2.m.daocloud.io</li> <li>Azure 中国镜像 https://dockerhub.azk8s.cn</li> <li>中科大镜像站 https://docker.mirrors.ustc.edu.cn</li> <li>阿里云 https://&lt;your_code&gt;.mirror.aliyuncs.com
需要先在阿里云注册并登录，点击“创建我的容器镜像”, 进入管理界面，
然后点击“镜像加速器” ，可获得镜像加速器连接。</li> <li>七牛云 https://reg-mirror.qiniu.com</li> <li>网易云 https://hub-mirror.c.163.com</li> <li>腾讯云 https://mirror.ccs.tencentyun.com</li></ul> <p><strong>注意要启动docker后才有<code>/etc/docker</code> 这个文件夹 <code>daemon.json</code>文件自己建</strong></p></blockquote></li> <li><p>安装docker</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>yum <span class="token function">install</span> docker-ce docker-ce-cli containerd.io docker-compose-plugin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p><code>docker-ce</code> 是 Docker Community Edition（社区版）的缩写，它是 Docker 的开源版本，提供了容器化应用程序的构建、分发和运行环境。</p> <p><code>docker-ce-cli</code> 是 Docker 的命令行界面工具，用于与 Docker 守护进程进行交互，管理容器和镜像等操作。</p> <p><code>containerd.io</code> 是 Docker 使用的容器运行时，它负责管理容器的生命周期、镜像管理和容器的执行环境。</p> <p><code>docker-compose-plugin</code> 是 Docker Compose 的插件，Docker Compose 是一个用于定义和运行多个 Docker 容器的工具，它使用一个 YAML 文件来配置应用程序的服务、网络和存储等。</p> <p>注意:默认执行<code>yum install docker-ce</code>就可以了,后面两个依赖不是必须的</p></blockquote></li> <li><p>启动docker</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>systemctl start <span class="token function">docker</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>设置开机启动</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>systemctl restart <span class="token function">docker</span>
systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span>
systemctl <span class="token builtin class-name">enable</span> containerd
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>验证是否安装成功</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> info
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <h3 id="离线安装"><a href="#离线安装" class="header-anchor">#</a> 离线安装</h3> <ul><li><p>准备安装包</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 下载地址</span>
https://download.docker.com/linux/static/stable/x86_64/docker-18.09.6.tgz
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>解压缩安装包</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> docker-18.09.6.tgz 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>复制解压缩后的文件到指定文件夹</p> <div class="language- line-numbers-mode"><pre class="language-text"><code> cp docker/* /usr/bin/ 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>注册编辑docker服务</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">vi</span> /etc/systemd/system/docker.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>复制下列内容到该文档中</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
<span class="token assign-left variable">Description</span><span class="token operator">=</span>Docker Application Container Engine
<span class="token assign-left variable">Documentation</span><span class="token operator">=</span>https://docs.docker.com
<span class="token assign-left variable">After</span><span class="token operator">=</span>network-online.target firewalld.service
<span class="token assign-left variable">Wants</span><span class="token operator">=</span>network-online.target
  
<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
<span class="token assign-left variable">Type</span><span class="token operator">=</span>notify
<span class="token comment"># the default is not to use systemd for cgroups because the delegate issues still</span>
<span class="token comment"># exists and systemd currently does not support the cgroup feature set required</span>
<span class="token comment"># for containers run by docker</span>
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/usr/bin/dockerd
<span class="token assign-left variable">ExecReload</span><span class="token operator">=</span>/bin/kill <span class="token parameter variable">-s</span> HUP <span class="token variable">$MAINPID</span>
<span class="token comment"># Having non-zero Limit*s causes performance problems due to accounting overhead</span>
<span class="token comment"># in the kernel. We recommend using cgroups to do container-local accounting.</span>
<span class="token assign-left variable">LimitNOFILE</span><span class="token operator">=</span>infinity
<span class="token assign-left variable">LimitNPROC</span><span class="token operator">=</span>infinity
<span class="token assign-left variable">LimitCORE</span><span class="token operator">=</span>infinity
<span class="token comment"># Uncomment TasksMax if your systemd version supports it.</span>
<span class="token comment"># Only systemd 226 and above support this version.</span>
<span class="token comment">#TasksMax=infinity</span>
<span class="token assign-left variable">TimeoutStartSec</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token comment"># set delegate yes so that systemd does not reset the cgroups of docker containers</span>
<span class="token assign-left variable">Delegate</span><span class="token operator">=</span>yes
<span class="token comment"># kill only the docker process, not all processes in the cgroup</span>
<span class="token assign-left variable">KillMode</span><span class="token operator">=</span>process
<span class="token comment"># restart the docker process if it exits prematurely</span>
<span class="token assign-left variable">Restart</span><span class="token operator">=</span>on-failure
<span class="token assign-left variable">StartLimitBurst</span><span class="token operator">=</span><span class="token number">3</span>
<span class="token assign-left variable">StartLimitInterval</span><span class="token operator">=</span>60s
  
<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
<span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>multi-user.target
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div></li> <li><p>添加权限后启动</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">chmod</span> +x /etc/systemd/system/docker.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>重新加载配置文件</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>systemctl daemon-reload
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>启动Docker</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>systemctl start <span class="token function">docker</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>设置开机自启</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>systemctl <span class="token builtin class-name">enable</span> docker.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>验证是否安装成功</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 查看docker 状态</span>
systemctl status <span class="token function">docker</span>
<span class="token comment"># 查看docker版本</span>
<span class="token function">docker</span> <span class="token parameter variable">-v</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <h2 id="_3-docker概念与执行流程"><a href="#_3-docker概念与执行流程" class="header-anchor">#</a> 3.docker概念与执行流程</h2> <h3 id="容器化平台"><a href="#容器化平台" class="header-anchor">#</a> 容器化平台</h3> <p>Docker 是提供应用打包，部署与运行应用的容器化平台。</p> <p><img src="/blog/docker.assets/image-20221123101715501.png" alt="image-20221123101715501"></p> <h3 id="docker引擎"><a href="#docker引擎" class="header-anchor">#</a> Docker引擎</h3> <p><img src="/blog/docker.assets/image-20221123101847629.png" alt="image-20221123101847629"></p> <ul><li><p>docker daemon</p> <p>Docker的服务端组件，他是Docker架构中运行在后台的一个守护进程，可以接收并处理来自命令行接口及API接口的指令，然后进行相应的后台操作。</p></li> <li><p>REST API</p> <p>表示应用程序API接口，开发者通过该API接口可以与Docker的守护进程进行交互，从而指示后台进行相关操作。</p></li> <li><p>docker CLI</p> <p>表示Docker命令行接口，开发者可以在命令行中使用Docker相关指令与Docker守护进程进行交互，从而管理诸如image(镜像)、container(容器)、network(网络)和data volumes(数据卷)等实体。</p></li></ul> <h3 id="容器-镜像-registry-镜像仓库"><a href="#容器-镜像-registry-镜像仓库" class="header-anchor">#</a> 容器,镜像,registry 镜像仓库</h3> <ul><li><p>registry 镜像仓库</p> <p>registry可以理解为镜像仓库，用于保存docker image。Docker Hub 是docker官方的镜像仓库，docker命令默认从docker hub中拉取镜像。我们也可以搭建自己的镜像仓库。</p></li> <li><p>镜像</p> <p>可以类似Java中的类。image可以理解为一个只读的应用模板。image包含了应用程序及其所需要的依赖环境，例如可执行文件、环境变量、初始化脚本、启动命令等。</p></li> <li><p>容器类的实例化,对象</p> <p>容器是image的一个运行实例。当我们运行一个image，就创建了一个容器。</p></li></ul> <blockquote><p>一个仓库可以存放多个镜像，一个镜像可以构建多个容器。</p></blockquote> <h3 id="docker执行流程"><a href="#docker执行流程" class="header-anchor">#</a> Docker执行流程</h3> <p><img src="/blog/docker.assets/image-20221123102324390.png" alt="image-20221123102324390"></p> <blockquote><p>客户端发送<code>docker pull Tomcat</code>  命令,命令到达 Docker daemon（守护程序），守护进程首先检查本地是否有该 <code>Tomcat</code> 的镜像，如果没有，则从注册中心（仓库）拉取该镜像；镜像拉取到本地后，客户端执行 <code>docker run</code>命令，守护程序就会创建容器，启动应用。</p></blockquote> <h3 id="docker-pull-命令详解"><a href="#docker-pull-命令详解" class="header-anchor">#</a> docker pull 命令详解</h3> <p>Docker Pull 命令是用来从 Docker 镜像仓库中拉取一个或多个镜像到本地主机的命令。执行 Docker Pull 命令后，Docker 客户端会首先检查本地主机是否已经存在该镜像，如果已经存在则直接使用本地的镜像，否则会从 Docker 镜像仓库中拉取对应的镜像。下面是 Docker Pull 命令的详细流程：</p> <ol><li><p>解析镜像名称和标签</p> <p>Docker Pull 命令需要提供要拉取的镜像名称和标签（tag），例如 <code>docker pull nginx:latest</code>。Docker 客户端会对这个名称进行解析，确定镜像所在的 Docker 镜像仓库地址、仓库名称和标签。</p></li> <li><p>认证 Docker 镜像仓库</p> <p>如果需要认证 Docker 镜像仓库，Docker 客户端会提示用户输入用户名和密码或者其他认证信息，以便向 Docker 镜像仓库发起认证请求。</p></li> <li><p>检查本地主机是否已有该镜像</p> <p>Docker 客户端会检查本地主机是否已经存在该镜像。如果本地主机已经有了该镜像，Docker 客户端会直接使用本地的镜像，否则会从 Docker 镜像仓库中拉取对应的镜像。</p></li> <li><p>从 Docker 镜像仓库中拉取镜像</p> <p>如果本地主机没有该镜像，Docker 客户端会向 Docker 镜像仓库发起拉取镜像的请求。Docker 镜像仓库会返回该镜像的所有层（layers），Docker 客户端会将这些层下载到本地主机，并根据层的依赖关系进行组装，最终生成完整的镜像。</p></li> <li><p>保存镜像到本地主机</p> <p>Docker 客户端会将拉取到的镜像保存到本地主机的 Docker 镜像缓存中，以便后续使用。Docker 镜像缓存一般位于 <code>/var/lib/docker</code> 目录下，其中的 <code>image</code> 目录存储了所有已经拉取到本地主机的镜像。</p></li> <li><p>更新本地镜像索引</p> <p>Docker 客户端会更新本地镜像索引（image index），以便在后续使用 <code>docker run</code> 命令时能够快速地找到该镜像。本地镜像索引一般位于 <code>/var/lib/docker/image/docker/registry/v2/repositories</code> 目录下。</p></li></ol> <p>总的来说，Docker Pull 命令的主要作用是从 Docker 镜像仓库中拉取镜像并保存到本地主机，以便在后续使用 <code>docker run</code> 命令时能够快速地启动容器。</p> <h2 id="_4-docker常用命令"><a href="#_4-docker常用命令" class="header-anchor">#</a> 4.docker常用命令</h2> <h3 id="万能帮助命令"><a href="#万能帮助命令" class="header-anchor">#</a> 万能帮助命令</h3> <ul><li><p><code>docker --help</code></p></li> <li><p><code>docker 命令 --help</code></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@oracleflink ~<span class="token punctuation">]</span><span class="token comment"># docker run --help</span>

Usage:  <span class="token function">docker</span> run <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> IMAGE <span class="token punctuation">[</span>COMMAND<span class="token punctuation">]</span> <span class="token punctuation">[</span>ARG<span class="token punctuation">..</span>.<span class="token punctuation">]</span>

Run a <span class="token builtin class-name">command</span> <span class="token keyword">in</span> a new container
<span class="token punctuation">..</span><span class="token punctuation">..</span>.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p><a href="https://docs.docker.com/engine/reference/commandline/docker/" target="_blank" rel="noopener noreferrer">官方命令文档参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <h3 id="常用命令"><a href="#常用命令" class="header-anchor">#</a> 常用命令</h3> <ul><li><p>查看版本信息</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@oracleflink ~<span class="token punctuation">]</span><span class="token comment"># docker version</span>
Client: Docker Engine - Community
 Version:           <span class="token number">20.10</span>.21
 API version:       <span class="token number">1.41</span>
 Go version:        go1.18.7
 Git commit:        baeda1f
 Built:             Tue Oct <span class="token number">25</span> <span class="token number">18</span>:04:24 <span class="token number">2022</span>
 OS/Arch:           linux/amd64
 Context:           default
 Experimental:      <span class="token boolean">true</span>

Server: Docker Engine - Community
 Engine:
  Version:          <span class="token number">20.10</span>.21
  API version:      <span class="token number">1.41</span> <span class="token punctuation">(</span>minimum version <span class="token number">1.12</span><span class="token punctuation">)</span>
  Go version:       go1.18.7
  Git commit:       <span class="token number">3056208</span>
  Built:            Tue Oct <span class="token number">25</span> <span class="token number">18</span>:02:38 <span class="token number">2022</span>
  OS/Arch:          linux/amd64
  Experimental:     <span class="token boolean">false</span>
 containerd:
  Version:          <span class="token number">1.6</span>.9
  GitCommit:        1c90a442489720eec95342e1789ee8a5e1b9536f
 runc:
  Version:          <span class="token number">1.1</span>.4
  GitCommit:        v1.1.4-0-g5fd4c4d
 docker-init:
  Version:          <span class="token number">0.19</span>.0
  GitCommit:        de40ad0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div></li> <li><p>查看系统信息</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> info
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <h3 id="镜像常用命令"><a href="#镜像常用命令" class="header-anchor">#</a> 镜像常用命令</h3> <ul><li><p>查看镜像</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@oracleflink ~<span class="token punctuation">]</span><span class="token comment"># docker images</span>
REPOSITORY                                                               TAG           IMAGE ID       CREATED        SIZE
mcr.microsoft.com/mssql/server                                           <span class="token number">2017</span>-latest   a03c94c3147d   <span class="token number">2</span> months ago   <span class="token number">1</span>.33GB
registry.cn-hangzhou.aliyuncs.com/lhrbest/oracle_12cr2_ee_lhr_12.2.0.1   <span class="token number">2.0</span>           eb1a87913afe   <span class="token number">2</span> years ago    <span class="token number">16</span>.1GB
registry.cn-hangzhou.aliyuncs.com/zhuyijun/oracle-12c                    latest        2963f42e27a2   <span class="token number">2</span> years ago    <span class="token number">6</span>.01GB
registry.cn-hangzhou.aliyuncs.com/helowin/oracle_11g                     latest        3fa112fd3642   <span class="token number">6</span> years ago    <span class="token number">6</span>.85GB
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>REPOSITORY: 镜像仓库源</p> <p>TAG：镜像版本，latest 表示最新版本</p> <p>IMAGE ID：镜像ID（特别重要）</p> <p>CREATED：创建时间</p> <p>SIZE：镜像大小。</p></blockquote></li> <li><p>搜索镜像</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[root@oracleflink ~]# docker search docker
NAME          DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED
nginx         Official build of Nginx.                        17721     [OK]       
ubuntu        Ubuntu is a Debian-based Linux operating sys…   15255     [OK]       
mysql         MySQL is a widely used, open-source relation…   13504     [OK]       
node          Node.js is a JavaScript-based platform for s…   12133     [OK]       
postgres      The PostgreSQL object-relational database sy…   11693     [OK]       
redis         Redis is an open source key-value store that…   11590     [OK]       
alpine        A minimal Docker image based on Alpine Linux…   9450      [OK]       
mongo         MongoDB document databases provide high avai…   9283      [OK]       
python        Python is an interpreted, interactive, objec…   8164      [OK]       
centos        DEPRECATED; The official build of CentOS.       7408      [OK]       
mariadb       MariaDB Server is a high performing open sou…   5155      [OK]       
wordpress     The WordPress rich content management system…   5001      [OK]       
rabbitmq      RabbitMQ is an open source multi-protocol me…   4560      [OK]       
debian        Debian is a Linux distribution that's compos…   4504      [OK]       
golang        Go (golang) is a general purpose, higher-lev…   4356      [OK]       
httpd         The Apache HTTP Server Project                  4247      [OK]       
registry      The Docker Registry 2.0 implementation for s…   3721      [OK]       
openjdk       Pre-release / non-production builds of OpenJ…   3495      [OK]       
busybox       Busybox base image.                             2822      [OK]       
traefik       Traefik, The Cloud Native Edge Router           2726      [OK]       
docker        Docker in Docker!                               2116      [OK]       
memcached     Free &amp; open source, high-performance, distri…   1971      [OK]       
hello-world   Hello World! (an example of minimal Dockeriz…   1906      [OK]       
influxdb      InfluxDB is an open source time series datab…   1651      [OK]       
consul        Consul is a datacenter runtime that provides…   1355      [OK]  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><blockquote><p><code>docker search &lt;镜像名&gt;</code></p> <p>NAME:镜像名称</p> <p>DESCRIPTION：镜像描述</p> <p>STARS：收藏数</p> <p>OFFICIAL：是否官方</p> <p>AUTOMATED：是否自动构建</p> <p>也可以直接进入 <a href="https://hub.docker.com/search?q=" target="_blank" rel="noopener noreferrer">docker hub网站直接搜索<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote></li> <li><p>下载镜像</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># docker pull 镜像名&lt;:tags&gt;</span>
<span class="token function">docker</span> pull nginx:1.22
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>如果不指定tags，默认下载最新版.一般不建议使用latest，因为最新的镜像是滚动更新的，过一段时间，可能跟你本地的不是同一个。</p></blockquote></li> <li><p>删除镜像</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 根据名称和版本删除，如果不指定tag，默认是lastest</span>
<span class="token function">docker</span> rmi repository<span class="token operator">&lt;</span>:tag<span class="token operator">&gt;</span>
<span class="token comment"># 根据镜像id删除</span>
<span class="token function">docker</span> rmi IMAGE_ID    
<span class="token comment"># 批量删除</span>
<span class="token function">docker</span> rmi IMAGE_ID1 IMAGE_ID2 <span class="token punctuation">..</span>.   
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul> <h3 id="容器常用命令"><a href="#容器常用命令" class="header-anchor">#</a> 容器常用命令</h3> <ul><li><p>新建容器并启动</p> <div class="language-SHELL line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># docker run &lt;参数&gt; 镜像id|镜像名称</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token parameter variable">--privileged</span><span class="token operator">=</span>true <span class="token parameter variable">-p</span> <span class="token number">1522</span>:1522 <span class="token parameter variable">-p</span> <span class="token number">5501</span>:5501 <span class="token parameter variable">--name</span> oracle11g <span class="token parameter variable">-v</span> /oracle11g/oradata:/oracle11g/oradata registry.cn-hangzhou.aliyuncs.com/helowin/oracle_11g
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>常用参数说明</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> run <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> IMAGE<span class="token punctuation">[</span>:TAG<span class="token punctuation">]</span> <span class="token punctuation">[</span>COMMAND<span class="token punctuation">]</span> <span class="token punctuation">[</span>ARG<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
  -d, <span class="token parameter variable">--detach</span><span class="token operator">=</span>false         指定容器运行于前台还是后台，默认为false     
  -i, <span class="token parameter variable">--interactive</span><span class="token operator">=</span>false   打开STDIN，用于控制台交互    
  -t, <span class="token parameter variable">--tty</span><span class="token operator">=</span>false            分配tty设备，该可以支持终端登录，默认为false    
  -u, <span class="token parameter variable">--user</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>              指定容器的用户    
  -a, <span class="token parameter variable">--attach</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>            登录容器（必须是以docker run -d启动的容器）  
  -w, <span class="token parameter variable">--workdir</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>           指定容器的工作目录   
  -c, --cpu-shares<span class="token operator">=</span><span class="token number">0</span>        设置容器CPU权重，在CPU共享场景使用    
  -e, <span class="token parameter variable">--env</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>               指定环境变量，容器中可以使用该环境变量    
  -m, <span class="token parameter variable">--memory</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>            指定容器的内存上限    
  -P, --publish-all<span class="token operator">=</span>false    指定容器暴露的端口    
  -p, <span class="token parameter variable">--publish</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>           指定容器暴露的端口   
  -h, <span class="token parameter variable">--hostname</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>          指定容器的主机名    
  -v, <span class="token parameter variable">--volume</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>            给容器挂载存储卷，挂载到容器的某个目录    
  --volumes-from<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>          给容器挂载其他容器上的卷，挂载到容器的某个目录  
  --cap-add<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>               添加权限    
  --cap-drop<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>              删除权限    
  <span class="token parameter variable">--cidfile</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>               运行容器后，在指定文件中写入容器PID值，一种典型的监控系统用法    
  <span class="token parameter variable">--cpuset</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>                设置容器可以使用哪些CPU，此参数可以用来容器独占CPU    
  <span class="token parameter variable">--device</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>                添加主机设备给容器，相当于设备直通    
  <span class="token parameter variable">--dns</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>                   指定容器的dns服务器    
  --dns-search<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>            指定容器的dns搜索域名，写入到容器的/etc/resolv.conf文件    
  <span class="token parameter variable">--entrypoint</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>            覆盖image的入口点    
  --env-file<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>              指定环境变量文件，文件格式为每行一个环境变量    
  <span class="token parameter variable">--expose</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>                指定容器暴露的端口，即修改镜像的暴露端口    
  <span class="token parameter variable">--link</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>                  指定容器间的关联，使用其他容器的IP、env等信息    
  --lxc-conf<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>              指定容器的配置文件，只有在指定--exec-driver<span class="token operator">=</span>lxc时使用    
  <span class="token parameter variable">--name</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>                  指定容器名字，后续可以通过名字进行容器管理，links特性需要使用名字    
  <span class="token parameter variable">--net</span><span class="token operator">=</span><span class="token string">&quot;bridge&quot;</span>             容器网络设置:  
                             bridge 使用docker daemon指定的网桥       
                             <span class="token function">host</span>   //容器使用主机的网络    
                             container:NAME_or_ID <span class="token operator">&gt;</span>//使用其他容器的网络，共享IP和PORT等网络资源    
                             none 容器使用自己的网络（类似--net<span class="token operator">=</span>bridge），但是不进行配置   
  <span class="token parameter variable">--privileged</span><span class="token operator">=</span>false         指定容器是否为特权容器，特权容器拥有所有的capabilities    
  <span class="token parameter variable">--restart</span><span class="token operator">=</span><span class="token string">&quot;no&quot;</span>             指定容器停止后的重启策略:  
                             no：容器退出时不重启    
                             on-failure：容器故障退出（返回值非零）时重启   
                             always：容器退出时总是重启    
  <span class="token parameter variable">--rm</span><span class="token operator">=</span>false                 指定容器停止后自动删除容器<span class="token punctuation">(</span>不支持以docker run -d启动的容器<span class="token punctuation">)</span>    
  --sig-proxy<span class="token operator">=</span>true           设置由代理接受并处理信号，但是SIGCHLD、SIGSTOP和SIGKILL不能被代理    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div></blockquote></li> <li><p>进入容器</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 方法一 使用run方式在创建时进入</span>
<span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token punctuation">[</span>镜像id<span class="token operator">|</span>镜像名<span class="token punctuation">]</span> /bin/bash
<span class="token comment"># 方法二 使用 attach 命令（进入已启动的容器）</span>
<span class="token function">docker</span> attach --sig-proxy<span class="token operator">=</span>false 容器名称<span class="token operator">|</span>容器ID
<span class="token comment"># 方法三 使用 exec 命令（进入已启动的容器）一般使用这个方法</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> 容器名称<span class="token operator">|</span>容器ID  /bin/bash
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>退出容器</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 方法一</span>
Ctrl+P+Q <span class="token builtin class-name">:</span> 仅退出容器，不关闭容器
<span class="token comment"># 方法二</span>
exit: 关闭容器并退出。
<span class="token comment"># 方法三</span>
ctr + d ：同方法二，方法二的快捷方式
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>查看所有运行的容器</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 1、查看正在运行的容器</span>
<span class="token function">docker</span> <span class="token function">ps</span>
<span class="token comment"># 2、查看正在运行的容器的ID</span>
<span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-q</span>
<span class="token comment"># 3、查看正在运行+历史运行过的容器</span>
<span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-a</span>
<span class="token comment"># 4、显示运行容器总文件大小</span>
<span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-s</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>停止与删除容器</p> <div class="language-SHELL line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 1.停止一个运行中的容器</span>
<span class="token function">docker</span> stop 容器名<span class="token operator">|</span>容器id
<span class="token comment"># 2.杀掉一个运行中的容器</span>
<span class="token function">docker</span> <span class="token function">kill</span> 容器名<span class="token operator">|</span>容器id
<span class="token comment"># 3.删除一个已停止的容器</span>
<span class="token function">docker</span> <span class="token function">rm</span> 容器名<span class="token operator">|</span>容器id
<span class="token comment"># 4.删除一个运行中的容器</span>
<span class="token function">docker</span> <span class="token function">rm</span> <span class="token parameter variable">-f</span> 容器名<span class="token operator">|</span>容器id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>容器重启</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> restart 容器名<span class="token operator">|</span>容器id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>容器关闭</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> stop 容器名<span class="token operator">|</span>容器id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>容器启动</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> start 容器名<span class="token operator">|</span>容器id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>查看容器日志</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># docker logs &lt;参数&gt;容器名|容器id</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>参数:</p> <p>-f  跟踪日志输出</p> <p>-t：显示时间戳</p> <p>--tail N：仅列出最后N条日志</p> <p><a href="https://kuizuo.cn/en/docs/docker-container-log-clean" target="_blank" rel="noopener noreferrer">Docker容器日志过大清理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote></li> <li><p>查看容器进程</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># docker top 容器ID|容器名</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>查看容器暴露的端口</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># docker port 容器ID|容器名</span>
<span class="token punctuation">[</span>root@gitlab ~<span class="token punctuation">]</span><span class="token comment"># docker port ruoyi-java</span>
<span class="token number">8080</span>/tcp -<span class="token operator">&gt;</span> <span class="token number">0.0</span>.0.0:8081
<span class="token number">8080</span>/tcp -<span class="token operator">&gt;</span> <span class="token punctuation">[</span>::<span class="token punctuation">]</span>:8081
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>查看容器信息</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># docker inspect 容器ID|容器名</span>
<span class="token comment"># 查看容器IP</span>
<span class="token function">docker</span> inspect <span class="token punctuation">\</span>
	<span class="token parameter variable">--format</span><span class="token operator">=</span><span class="token string">'{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}'</span> db-mysql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>修改容器名称</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># docker rename 旧容器名称 新容器名称</span>
<span class="token function">docker</span> <span class="token function">rename</span> docker-compose-wordpress-1 <span class="token operator">&lt;</span>新容器名称<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>主机和容器之间数据复制</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 将容器中的文件copy至本地路径</span>
<span class="token function">docker</span> <span class="token function">cp</span> 容器名<span class="token operator">|</span>容器ID:/<span class="token punctuation">[</span>container_path<span class="token punctuation">]</span> <span class="token punctuation">[</span>local_path<span class="token punctuation">]</span>
<span class="token function">docker</span> <span class="token function">cp</span> /www/runoob 96f7f14e99ab:/www/
<span class="token comment"># 将主机文件copy至容器</span>
<span class="token function">docker</span> <span class="token function">cp</span> <span class="token punctuation">[</span>local_path<span class="token punctuation">]</span> 容器名<span class="token operator">|</span>容器ID:/<span class="token punctuation">[</span>container_path<span class="token punctuation">]</span>
<span class="token comment"># 将主机文件copy至容器，目录重命名为[container_path]（注意与非重命名copy的区别）</span>
<span class="token function">docker</span> <span class="token function">cp</span> /www/runoob 96f7f14e99ab:/www
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p><a href="https://www.runoob.com/docker/docker-cp-command.html" target="_blank" rel="noopener noreferrer">cp命令参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote></li></ul> <h2 id="_5-docker网络"><a href="#_5-docker网络" class="header-anchor">#</a> 5.docker网络</h2> <h3 id="docker网络分类"><a href="#docker网络分类" class="header-anchor">#</a> docker网络分类</h3> <ul><li><p>网络查看</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@gitlab ~<span class="token punctuation">]</span><span class="token comment"># docker network ls</span>
NETWORK ID     NAME                       DRIVER    SCOPE
b5ceee1d0e2b   bridge                     bridge    <span class="token builtin class-name">local</span>
406f713d001a   docker-compose_default     bridge    <span class="token builtin class-name">local</span>
b072f05ac81e   docker-compose_ruoyi-net   bridge    <span class="token builtin class-name">local</span>
267f6d502cc3   harbor-portal_default      bridge    <span class="token builtin class-name">local</span>
a69e7dfb3477   <span class="token function">host</span>                       <span class="token function">host</span>      <span class="token builtin class-name">local</span>
204deb3307eb   my-net                     bridge    <span class="token builtin class-name">local</span>
ba22e0c6f61f   none                       null      <span class="token builtin class-name">local</span>
7e81235f79b3   ruoyi-net                  bridge    <span class="token builtin class-name">local</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li> <li><p>网络分类</p> <ul><li><p>bridge</p> <p>如果不指定，新创建的容器默认将连接到bridge网络。默认情况下，使用bridge网络，宿主机可以ping通容器ip，容器中也能ping通宿主机。容器之间只能通过 IP 地址相互访问，由于容器的ip会随着启动顺序发生变化，因此不推荐使用ip访问。</p> <blockquote><p>由于很多镜像为精简镜像，可能很多Linux命令没有，可以使用 busybox测试一些Linux 命令。<a href="https://blog.csdn.net/m0_67391683/article/details/124169685" target="_blank" rel="noopener noreferrer">docker 工具 busybox<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote></li> <li><p>host</p> <p>容器与宿主机共享网络，不需要映射端口即可通过宿主机IP访问。（-p选项会被忽略）主机模式网络可用于优化性能，在容器需要处理大量端口的情况下，它不需要网络地址转换 （NAT），并且不会为每个端口创建“用户空间代理”。</p></li> <li><p>none</p> <p>禁用容器中所用网络，在启动容器时使用。</p></li></ul></li></ul> <h3 id="用户自定义网络"><a href="#用户自定义网络" class="header-anchor">#</a> 用户自定义网络</h3> <p>在用户自定义网络上，容器之间可以通过容器名进行访问。用户自定义网络使用 Docker 的嵌入式 DNS 服务器将容器名解析成 IP。</p> <p>使用步骤如下</p> <ol><li><p>创建用户自定义网络</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> network create my-net
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>将已有容器连接到此网络</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> network connect my-net db-mysql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>创建容器时指定网络。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">--rm</span> <span class="token parameter variable">--network</span> my-net mysql:5.7 mysql <span class="token parameter variable">-h</span> db-mysql <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-p</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <h3 id="docker主机名"><a href="#docker主机名" class="header-anchor">#</a> docker主机名</h3> <ul><li><p>主机名查看</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># docker inspect &lt;容器名称或容器ID&gt; | grep &quot;Hostname&quot; </span>
<span class="token punctuation">[</span>root@gitlab ~<span class="token punctuation">]</span><span class="token comment"># docker inspect wordpress | grep &quot;Hostname&quot;</span>
        <span class="token string">&quot;HostnamePath&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/containers/8abec2e8548172d7761624e822da675dd973c1c1500e41f99e27bf6818f5504c/hostname&quot;</span>,
            <span class="token string">&quot;Hostname&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;8abec2e85481&quot;</span>,
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>容器的hostname默认为容器的 ID。</p></blockquote></li> <li><p>主机名修改</p> <p>在容器内手动修改/etc/hosts文件，容器重启后会恢复默认配置。要是/etc/hosts修改生效，使用<code>--add-host</code></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 方式一</span>
<span class="token function">docker</span> run --add-host<span class="token operator">=</span>my-alpine:172.17.0.3 <span class="token parameter variable">-it</span> <span class="token parameter variable">--rm</span> alpine:3.15
<span class="token comment"># 方式二</span>
<span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">-d</span> <span class="token parameter variable">--hostname</span> my-alpine <span class="token parameter variable">--name</span> my-alpine  alpine:3.15
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <h3 id="docker容器间通信方式总结"><a href="#docker容器间通信方式总结" class="header-anchor">#</a> docker容器间通信方式总结</h3> <ul><li><p>利用容器ip访问</p> <p>容器重启后，ip会发生变化。通过容器ip访问不是一个好的方案。</p></li> <li><p>利用宿主机的<code>ip:port</code>访问</p> <p>通过宿主机的ip:port访问，只能依靠监听在暴露出的端口的进程来进行有限的通信。</p></li> <li><p>利用link建立连接进行通信(官方不推荐使用)</p></li> <li><p>利用用户自定义网络(<code>User-defined networks</code>)进行通信(官方推荐使用)</p></li></ul> <blockquote><p><a href="https://www.php.cn/docker/488507.html" target="_blank" rel="noopener noreferrer">容器间通信<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h2 id="_6-docker数据存储"><a href="#_6-docker数据存储" class="header-anchor">#</a> 6.docker数据存储</h2> <h3 id="docker存储概念"><a href="#docker存储概念" class="header-anchor">#</a> docker存储概念</h3> <p>将数据存储在容器中，一旦容器被删除，数据也会被删除。同时也会使容器变得越来越大，不方便恢复和迁移。将数据存储到容器之外，这样删除容器也不会丢失数据。一旦容器故障，我们可以重新创建一个容器，将数据挂载到容器里，就可以快速的恢复。</p> <h3 id="数据存储的方式"><a href="#数据存储的方式" class="header-anchor">#</a> 数据存储的方式</h3> <p>docker有以下三种存储方式:</p> <ul><li><p><strong>volume 卷</strong></p> <p><strong>卷</strong>存储在主机文件系统分配一块专有存储区域，<em>由 Docker</em>（在 Linux 上）管理，并且与主机的核心功能隔离。非 Docker 进程不能修改文件系统的这一部分。卷是在 Docker 中持久保存数据的最佳方式。</p> <p>卷 是docker 容器存储数据的首选方式，卷有以下优势：</p> <ul><li>卷可以在多个正在运行的容器之间共享数据。仅当显式删除卷时，才会删除卷。</li> <li>当你想要将容器数据存储在外部网络存储上或云提供商上，而不是本地时。</li> <li>卷更容易备份或迁移，当您需要备份、还原数据或将数据从一个 Docker 主机迁移到另一个 Docker 主机时，卷是更好的选择。</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 创建数据卷</span>
<span class="token function">docker</span> volume create my-data

<span class="token function">docker</span> run <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span>
           <span class="token parameter variable">-v</span> /home/mysql/conf.d/my.cnf:/etc/mysql/conf.d/my.cnf:ro  <span class="token punctuation">\</span>
           <span class="token parameter variable">-v</span> my-data:/var/lib/mysql  <span class="token punctuation">\</span>
           <span class="token parameter variable">-d</span> mysql:5.7 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 创建 nfs卷</span>
<span class="token function">docker</span> volume create <span class="token parameter variable">--driver</span> <span class="token builtin class-name">local</span> <span class="token punctuation">\</span>
    <span class="token parameter variable">--opt</span> <span class="token assign-left variable">type</span><span class="token operator">=</span>nfs <span class="token punctuation">\</span>
    <span class="token parameter variable">--opt</span> <span class="token assign-left variable">o</span><span class="token operator">=</span>addr<span class="token operator">=</span><span class="token number">192.168</span>.1.1,rw <span class="token punctuation">\</span>
    <span class="token parameter variable">--opt</span> <span class="token assign-left variable">device</span><span class="token operator">=</span>:/path/to/dir <span class="token punctuation">\</span>
    vol-nfs
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p><strong>bind mount 绑定挂载</strong></p> <p><strong>绑定挂载</strong>可以将主机文件系统上目录或文件<em>装载到容器中</em>，但是主机上的非 Docker 进程可以修改它们，同时在<strong>容器</strong>中也可以更改<strong>主机</strong>文件系统，包括创建、修改或删除文件或目录，使用不当，可能会带来安全隐患。</p> <p>绑定挂载适用以下场景：</p> <ul><li><p>将配置文件从主机共享到容器。</p></li> <li><p>在 Docker 主机上的开发环境和容器之间共享源代码或编译目录。</p></li> <li><ul><li>例如，可以将 Maven 的<code>target/</code>目录挂载到容器中，每次在主机上用 Maven打包项目时，容器内都可以使用新编译的程序包。</li></ul></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> run <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span>
           <span class="token parameter variable">-v</span> /home/mysql/mysql.cnf:/etc/mysql/conf.d/mysql.cnf:ro  <span class="token punctuation">\</span>
           <span class="token parameter variable">-v</span> /home/mysql/data:/var/lib/mysql  <span class="token punctuation">\</span>
           <span class="token parameter variable">-d</span> mysql:5.7 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>执行命令<code>docker run -it -v 宿主机目录:容器目录</code></p> <p>-v 绑定挂载</p> <p>绑定挂载将主机上的目录或者文件装载到容器中。绑定挂载会覆盖容器中的目录或文件。</p> <p>如果宿主机目录不存在，docker会自动创建这个目录。但是docker只自动创建文件夹，不会创建文件。</p> <p>例如，mysql的配置文件和数据存储目录使用主机的目录。可以将配置文件设置为只读（read-only）防止容器更改主机中的文件。</p></blockquote></li> <li><p><strong>tmpfs</strong> <strong>临时挂载</strong></p> <p><strong>tmpfs挂载</strong>仅存储在主机系统的内存中，从不写入主机系统的文件系统。当容器停止时，数据将被删除。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-it</span> <span class="token parameter variable">--tmpfs</span> /tmp nginx:1.22-alpine
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <h3 id="数据卷的删除"><a href="#数据卷的删除" class="header-anchor">#</a> 数据卷的删除</h3> <p>由于删除容器不会删除存储卷，要彻底删除信息应该删除容器后删除数据卷。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 1. 停止容器</span>
<span class="token function">docker</span> stop ruoyi-db
<span class="token comment"># 2. 删除容器</span>
<span class="token function">docker</span> <span class="token function">rm</span> ruoyi-db
<span class="token comment"># 3. 删除容器对应的数据卷</span>
<span class="token function">docker</span> volume <span class="token function">rm</span> ruoyi-data
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h3> <p><a href="https://zimug.blog.csdn.net/article/details/125039578" target="_blank" rel="noopener noreferrer">容器间进行数据共享的三种方式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_7-部署自己的应用"><a href="#_7-部署自己的应用" class="header-anchor">#</a> 7. 部署自己的应用</h2> <p>完成若依admin安装</p> <ul><li><p>下载项目源码</p></li> <li><p>修改yml配置文件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># 开发环境配置
server:
  # 服务器的HTTP端口，默认为80
  port: 8080
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>修改数据库连接配置</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">druid</span><span class="token punctuation">:</span>
<span class="token comment"># 主库数据源</span>
   <span class="token key atrule">master</span><span class="token punctuation">:</span>
       <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//ruoyi<span class="token punctuation">-</span>db<span class="token punctuation">:</span>3306/ry<span class="token punctuation">?</span>useUnicode=true<span class="token important">&amp;characterEncoding=utf8</span>
       <span class="token key atrule">username</span><span class="token punctuation">:</span> root
       <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>maven打包生成jar文件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[root@gitlab app]# ll
total 74004
-rw-r--r--. 1 root root      113 Aug  4 16:02 Dockerfile
-rw-r--r--. 1 root root 75774628 Aug  4 09:21 ruoyi-admin.jar
drwxr-xr-x. 2 root root       82 Aug  4 09:47 sql
[root@gitlab app]# pwd
/home/app
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>将打包生成的jar文件放在以上目录，sql目录存放初始化SQL脚本。</p></blockquote></li> <li><p>创建数据卷和网络</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 1. 创建数据卷</span>
<span class="token function">docker</span> volume create ruoyi-data
<span class="token comment"># 2. 创建用户自定义网络</span>
<span class="token function">docker</span> network create ruoyi-net
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>部署MySQL并初始化</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> run <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> <span class="token punctuation">\</span>
           <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_DATABASE</span><span class="token operator">=</span>ry <span class="token punctuation">\</span>
		  <span class="token parameter variable">-v</span> /home/app/sql:/docker-entrypoint-initdb.d <span class="token punctuation">\</span>
           <span class="token parameter variable">-v</span> ruoyi-data:/var/lib/mysql  <span class="token punctuation">\</span>
           <span class="token parameter variable">--network</span> ruoyi-net <span class="token punctuation">\</span>
           <span class="token parameter variable">--name</span> ruoyi-db <span class="token punctuation">\</span>
           <span class="token parameter variable">-d</span> mysql:5.7 <span class="token punctuation">\</span>
           --character-set-server<span class="token operator">=</span>utf8mb4 --collation-server<span class="token operator">=</span>utf8mb4_unicode_ci
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>注意这里的--name ruoyi-db 是要和数据库连接串中的ruoyi-db保持一致</p></blockquote></li> <li><p>解决乱码问题</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[root@gitlab app]# docker exec -it ruoyi-db mysql -uroot -p
Enter password: 
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 7
Server version: 5.7.43 MySQL Community Server (GPL)

Copyright (c) 2000, 2023, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql&gt; show variables like '%char%';
+--------------------------+----------------------------+
| Variable_name            | Value                      |
+--------------------------+----------------------------+
| character_set_client     | utf8                       |
| character_set_connection | utf8                       |
| character_set_database   | utf8mb4                    |
| character_set_filesystem | binary                     |
| character_set_results    | utf8                       |
| character_set_server     | utf8mb4                    |
| character_set_system     | utf8                       |
| character_sets_dir       | /usr/share/mysql/charsets/ |
+--------------------------+----------------------------+
8 rows in set (0.01 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><blockquote><p>修改编码为utf8mb4</p> <p>乱码问题参考:https://github.com/docker-library/mysql/issues/131</p></blockquote></li> <li><p>部署<code>ruoyi-admin</code></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> run <span class="token parameter variable">-p</span> <span class="token number">8081</span>:8080 <span class="token punctuation">\</span>
		  <span class="token parameter variable">-v</span> /home/app/ruoyi-admin.jar:/usr/local/src/ruoyi-admin.jar <span class="token punctuation">\</span>
           <span class="token parameter variable">--network</span> ruoyi-net <span class="token punctuation">\</span>
           <span class="token parameter variable">--name</span> ruoyi-java <span class="token punctuation">\</span>
		  <span class="token parameter variable">-d</span> openjdk:8u342-jre <span class="token punctuation">\</span>
           <span class="token function">java</span> <span class="token parameter variable">-jar</span> /usr/local/src/ruoyi-admin.jar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul> <h2 id="_8-docker-compose"><a href="#_8-docker-compose" class="header-anchor">#</a> 8.docker compose</h2> <h3 id="docker-compose概念"><a href="#docker-compose概念" class="header-anchor">#</a> Docker Compose概念</h3> <p>Compose 是用于定义和运行多容器 Docker 应用程序的工具。通过 Compose，您可以使用 YML 文件来配置应用程序需要的所有服务。然后，使用一个命令，就可以从 YML 文件配置中创建并启动所有服务。</p> <h3 id="出现原因"><a href="#出现原因" class="header-anchor">#</a> 出现原因</h3> <p>在实际的生产中，一般都是使用一个docker容器部署一个应用进程，这种情况下，当部署多个不同应用或者一个应用部署多个实例的时候，就要运行多个容器。多个容器协同工作需要一个管理者来管理他们，定义这些容器如何相互关联。compose 就是做这件事的。</p> <blockquote><p>Docker Compose的主要作用是帮助我们批量有规则的管理容器。</p></blockquote> <h3 id="一键部署wordpress"><a href="#一键部署wordpress" class="header-anchor">#</a> 一键部署wordpress</h3> <p><a href="https://hub.docker.com/_/wordpress" target="_blank" rel="noopener noreferrer">wordpress<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>是一个著名的开源博客系统。将以下内容保存到本地的docker-compose.yml文件中。<code>docker compose</code>命令启动时，默认在当前目录下寻找<code>compose.yaml</code>或<code>compose.yml</code>，为了兼容之前的版本，也会查找<code>docker-compose.yaml</code>或<code>docker-compose.yml</code>。也可以使用<code>-f</code>参数手动指定文件<code>docker compose -f docker-compose-dev.yml up -d</code></p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.1'</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>

  <span class="token key atrule">wordpress</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> wordpress
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 8085<span class="token punctuation">:</span><span class="token number">80</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">WORDPRESS_DB_HOST</span><span class="token punctuation">:</span> db
      <span class="token key atrule">WORDPRESS_DB_USER</span><span class="token punctuation">:</span> exampleuser
      <span class="token key atrule">WORDPRESS_DB_PASSWORD</span><span class="token punctuation">:</span> examplepass
      <span class="token key atrule">WORDPRESS_DB_NAME</span><span class="token punctuation">:</span> exampledb
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> wordpress<span class="token punctuation">:</span>/var/www/html

  <span class="token key atrule">db</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span><span class="token number">5.7</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">MYSQL_DATABASE</span><span class="token punctuation">:</span> exampledb
      <span class="token key atrule">MYSQL_USER</span><span class="token punctuation">:</span> exampleuser
      <span class="token key atrule">MYSQL_PASSWORD</span><span class="token punctuation">:</span> examplepass
      <span class="token key atrule">MYSQL_RANDOM_ROOT_PASSWORD</span><span class="token punctuation">:</span> <span class="token string">'1'</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> db<span class="token punctuation">:</span>/var/lib/mysql

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">wordpress</span><span class="token punctuation">:</span>
  <span class="token key atrule">db</span><span class="token punctuation">:</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h3 id="docker-compose常用命令"><a href="#docker-compose常用命令" class="header-anchor">#</a> docker compose常用命令</h3> <p><code>docker compose up -d</code>一键部署启动</p> <p><code>docker compose start/stop</code>启动/停止服务</p> <p><code>docker compose down</code>停止并删除容器，不会删除存储卷volume</p> <p><code>docker compose -f docker-compose-dev.yml up -d</code> 手动指定 compose文件</p> <h3 id="compose文件结构"><a href="#compose文件结构" class="header-anchor">#</a> compose文件结构</h3> <p><code>docker-compose.yml</code>通常需要包含以下几个顶级元素：</p> <p><code>version</code> 已弃用，早期版本需要此元素。</p> <p><code>services</code>必要元素，定义一个或多个容器的运行参数</p> <p>在<code>services</code>中可以通过以下元素定义容器的运行参数</p> <ul><li><p><code>image</code> 容器 镜像</p></li> <li><p><code>ports</code>端口映射</p></li> <li><p><code>environment</code>环境变量</p></li> <li><p><code>networks</code>容器使用的网络</p></li> <li><p><code>volumes</code>容器挂载的存储卷</p></li> <li><p><code>command</code>容器启动时执行的命令</p></li> <li><p><code>depends_on</code>定义启动顺序</p></li> <li><p>复数形式（例如<code>ports</code>,<code>networks</code>,<code>volumes</code>,<code>depends_on</code>）参数需要传入列表</p></li></ul> <p><code>networks</code>创建自定义网络</p> <p><code>volumes</code> 创建存储卷</p> <h3 id="yaml语法"><a href="#yaml语法" class="header-anchor">#</a> YAML语法</h3> <ul><li>缩进代表上下级关系</li> <li>缩进时不允许使用Tab键，只允许使用空格</li> <li><code>:</code> 键值对，后面必须有空格</li> <li><code>-</code>列表，后面必须有空格</li> <li><code>[ ]</code>数组</li> <li><code>#</code>注释</li> <li><code>{key:value,k1:v1}</code>map</li> <li><code>|</code> 多行文本块</li></ul> <p>如果一个文件中包含多个文档</p> <ul><li><code>---</code>表示一个文档的开始</li></ul> <h3 id="vscode-remote-ssh插件"><a href="#vscode-remote-ssh插件" class="header-anchor">#</a> VSCode Remote SSH插件</h3> <ul><li><p>背景</p> <p>YAML格式文件直接在Linux中使用VI或VIM编辑不方便。使用VSCode Remote SSH 连接远程服务器编写yaml文件。</p></li> <li><p>Remote SSH插件简介</p> <p>Remote-SSH是一个VSCode的插件，Remote-SSH可以让你使用任何带有SSH服务的远端机器作为你的开发环境。这可以大大简化各种情况下的开发和故障排除。使用了Remote-SSH插件之后，你可以：</p> <ul><li>在您部署的同一操作系统上进行开发，或者使用比本地计算机更大、更快或更专业的硬件。</li> <li>在不同的远程开发环境之间快速切换，并安全地进行更新，而无需担心影响本地计算机。</li> <li>从多台计算机或多个位置访问现有开发环境。</li> <li>调试在其他地方（如客户站点或云中）运行的应用程序。</li></ul></li> <li><p>插件安装</p> <ul><li><p>插件市场安装</p> <p>首先安装VSCode，然后在扩展中搜索&quot;Remote&quot;，安装搜索到的&quot;Remote-SSH&quot;和&quot;Remote-Containers&quot;，&quot;Remote-SSH: Editing Configuration&quot;插件会在安装&quot;Remote-SSH&quot;插件时自动</p></li> <li><p>确保远程SSH已开</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 可以检查22端口是否被监听</span>
<span class="token punctuation">[</span>root@gitlab ~<span class="token punctuation">]</span><span class="token comment"># lsof -i:22</span>
COMMAND   PID <span class="token environment constant">USER</span>   FD   TYPE DEVICE SIZE/OFF NODE NAME
sshd     <span class="token number">1067</span> root    3u  IPv4  <span class="token number">29703</span>      0t0  TCP *:ssh <span class="token punctuation">(</span>LISTEN<span class="token punctuation">)</span>
sshd     <span class="token number">1067</span> root    4u  IPv6  <span class="token number">29705</span>      0t0  TCP *:ssh <span class="token punctuation">(</span>LISTEN<span class="token punctuation">)</span>
sshd     <span class="token number">3887</span> root    3u  IPv4  <span class="token number">41472</span>      0t0  TCP gitlab:ssh-<span class="token operator">&gt;</span><span class="token number">192.168</span>.35.1:51514 <span class="token punctuation">(</span>ESTABLISHED<span class="token punctuation">)</span>
sshd    <span class="token number">95766</span> root    3u  IPv4 <span class="token number">571046</span>      0t0  TCP gitlab:ssh-<span class="token operator">&gt;</span><span class="token number">192.168</span>.35.1:65307 <span class="token punctuation">(</span>ESTABLISHED<span class="token punctuation">)</span>
<span class="token comment"># 或者直接查看SSH 服务状态</span>
<span class="token punctuation">[</span>root@gitlab ~<span class="token punctuation">]</span><span class="token comment"># systemctl status sshd</span>
● sshd.service - OpenSSH server daemon
   Loaded: loaded <span class="token punctuation">(</span>/usr/lib/systemd/system/sshd.service<span class="token punctuation">;</span> enabled<span class="token punctuation">;</span> vendor preset: enabled<span class="token punctuation">)</span>
   Active: active <span class="token punctuation">(</span>running<span class="token punctuation">)</span> since Mon <span class="token number">2023</span>-08-07 08:31:26 CST<span class="token punctuation">;</span> 8h ago
     Docs: man:sshd<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
           man:sshd_config<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
 Main PID: <span class="token number">1067</span> <span class="token punctuation">(</span>sshd<span class="token punctuation">)</span>
    Tasks: <span class="token number">1</span>
   Memory: <span class="token number">7</span>.1M
   CGroup: /system.slice/sshd.service
           └─1067 /usr/sbin/sshd <span class="token parameter variable">-D</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li> <li><p>配置免密登录</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 1.将本地生成的公钥重写到 authorized_keys文件中</span>
<span class="token punctuation">[</span>root@gitlab /<span class="token punctuation">]</span><span class="token comment"># cat id_rsa.pub &gt; ~/.ssh/authorized_keys</span>
<span class="token comment"># 2.在 vscode弹出的配置的文件中填写 ip ,用户名,私钥</span>
Host <span class="token number">192.168</span>.35.106
  HostName <span class="token number">192.168</span>.35.106
  User root
  IdentityFile C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>xxx<span class="token punctuation">\</span>.ssh<span class="token punctuation">\</span>id_rsa
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul></li></ul> <h3 id="编排自己的项目"><a href="#编排自己的项目" class="header-anchor">#</a> 编排自己的项目</h3> <p>编排上一章部署的若依项目。</p> <p>在 <code>/home/docker-compose/</code>目录下创建<code>docker-compose-ry.yml</code> 文件，已手动指定compose文件的方式启动容器，执行命令启动:<code>docker compose -f docker-compose-ry.yml up -d</code></p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">services</span><span class="token punctuation">:</span> 

  <span class="token key atrule">ruoyi-app</span><span class="token punctuation">:</span>
    <span class="token comment">#  docker run --name ruoyi-app      \</span>
    <span class="token comment">#             -p 8080:8080        \</span>
    <span class="token comment">#             --network ruoyi-net      \</span>
    <span class="token comment">#             -v /home/app/ruoyi-admin.jar:/usr/local/src/ruoyi-admin.jar   \</span>
    <span class="token comment">#             -d openjdk:8u342-jre    \</span>
    <span class="token comment">#             java -jar /usr/local/src/ruoyi-admin.jar</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> openjdk<span class="token punctuation">:</span>8u342<span class="token punctuation">-</span>jre
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 8086<span class="token punctuation">:</span><span class="token number">8080</span>
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ruoyi<span class="token punctuation">-</span>net
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /home/app/ruoyi<span class="token punctuation">-</span>admin.jar<span class="token punctuation">:</span>/usr/local/src/ruoyi<span class="token punctuation">-</span>admin.jar
    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-jar&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/usr/local/src/ruoyi-admin.jar&quot;</span> <span class="token punctuation">]</span>
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;CMD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;curl&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-f&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://localhost:8080&quot;</span><span class="token punctuation">]</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 10s
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 5s
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">5</span>
      <span class="token key atrule">start_period</span><span class="token punctuation">:</span> 10s
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token key atrule">ruoyi-db</span><span class="token punctuation">:</span>
        <span class="token key atrule">condition</span><span class="token punctuation">:</span> service_healthy

  <span class="token key atrule">ruoyi-db</span><span class="token punctuation">:</span>
    <span class="token comment">#  docker run --name ruoyi-db -p 3303:3306 \</span>
    <span class="token comment">#             --network ruoyi-net        \</span>
    <span class="token comment">#             -v ruoyi-data:/var/lib/mysql  \</span>
    <span class="token comment">#             -v /home/app/sql:/docker-entrypoint-initdb.d   \</span>
    <span class="token comment">#             -e MYSQL_DATABASE=ry         \</span>
    <span class="token comment">#             -e MYSQL_ROOT_PASSWORD=123456    \</span>
    <span class="token comment">#             -d mysql:5.7      \</span>
    <span class="token comment">#             --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci --skip-character-set-client-handshake</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span><span class="token number">5.7</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> MYSQL_DATABASE=ry
      <span class="token punctuation">-</span> MYSQL_ROOT_PASSWORD=123456
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ruoyi<span class="token punctuation">-</span>data<span class="token punctuation">:</span>/var/lib/mysql
      <span class="token punctuation">-</span> /home/app/sql<span class="token punctuation">:</span>/docker<span class="token punctuation">-</span>entrypoint<span class="token punctuation">-</span>initdb.d
    <span class="token key atrule">networks</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ruoyi<span class="token punctuation">-</span>net
    <span class="token key atrule">command</span><span class="token punctuation">:</span>
      <span class="token punctuation">[</span>
        <span class="token string">&quot;--character-set-server=utf8mb4&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;--collation-server=utf8mb4_unicode_ci&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;--skip-character-set-client-handshake&quot;</span>
      <span class="token punctuation">]</span>
    <span class="token comment"># healthcheck健康检查</span>
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
    <span class="token comment"># 执行检查命令 mysqladmin ping -h localhost -u root -p$$MYSQL_ROOT_PASSWORD</span>
      <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;CMD&quot;</span><span class="token punctuation">,</span> <span class="token string">'mysqladmin'</span><span class="token punctuation">,</span> <span class="token string">'ping'</span><span class="token punctuation">,</span> <span class="token string">'-h'</span><span class="token punctuation">,</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span> <span class="token string">'-u'</span><span class="token punctuation">,</span> <span class="token string">'root'</span><span class="token punctuation">,</span> <span class="token string">'-p$$MYSQL_ROOT_PASSWORD'</span><span class="token punctuation">]</span>
      <span class="token comment"># 健康检查的间隔时间 设置为10s</span>
      <span class="token key atrule">interval</span><span class="token punctuation">:</span> 10s
      <span class="token comment"># 每次健康检查的超时时间。如果健康检查命令在超时时间内没有返回结果，则认为检查失败。在这个例子中，设置为 5 秒。</span>
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 5s
      <span class="token comment"># 在健康检查失败后的重试次数。如果健康检查失败，Docker 将尝试重新运行健康检查命令的次数。在这个例子中，设置为 5 次。</span>
      <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">5</span>
      <span class="token comment"># 容器启动后的等待时间，在这段时间内不会进行健康检查。这是为了避免容器刚启动时就进行健康检查，因为容器可能需要一些时间来完成启动过程。在这个例子中，设置为 10 秒。</span>
      <span class="token key atrule">start_period</span><span class="token punctuation">:</span> 10s

<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">ruoyi-data</span><span class="token punctuation">:</span>

<span class="token key atrule">networks</span><span class="token punctuation">:</span>
  <span class="token key atrule">ruoyi-net</span><span class="token punctuation">:</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br></div></div><h3 id="容器启动顺序"><a href="#容器启动顺序" class="header-anchor">#</a> 容器启动顺序</h3> <ul><li><p><code>depends_on</code></p> <p>在 Docker Compose 中，<code>depends_on</code> 是一个用于定义服务之间依赖关系的关键字。它允许您指定一个或多个服务依赖于其他服务的启动和运行。使用 <code>depends_on</code> 关键字，您可以确保在启动服务时，所依赖的服务已经启动并可用。这对于需要等待其他服务准备就绪后再启动的场景非常有用，例如在应用程序容器依赖于数据库容器时。</p> <p>请注意以下几点：</p> <ul><li><code>depends_on</code> 并不会等待依赖的服务完全可用，它只会等待依赖的服务启动。因此，在某些情况下，即使依赖的服务已经启动，也不能保证它已经完全可用。</li> <li>在 Docker Compose v3 版本及以上，<code>depends_on</code> 不会强制等待依赖的服务启动完成。如果您需要确保服务完全可用后再启动依赖它的服务，可以结合使用健康检查来实现。</li> <li>在 Docker Compose 中，服务之间的依赖关系是在启动时进行检查的，而不是在运行时。这意味着如果依赖的服务在启动后发生故障，依赖它的服务可能仍然会启动，而不会自动停止。</li></ul> <p>总而言之，<code>depends_on</code> 是 Docker Compose 中用于定义服务依赖关系的关键字，它可以确保在启动服务时，所依赖的服务已经启动。但要注意它的限制和行为，以及在需要等待服务完全可用时，可以结合使用健康检查来实现。</p></li> <li><p><code>healthcheck</code></p> <p>健康检查用于确定容器是否正常运行，并根据检查结果自动处理容器的状态。在健康检查的 <code>test</code> 字段中，<code>CMD</code> 是一个关键字，用于指定要执行的命令。它是一个数组，包含了要运行的命令及其参数。</p> <p>在上个例子中，<code>CMD</code> 的值为 <code>[&quot;mysqladmin&quot;, &quot;ping&quot;, &quot;-h&quot;, &quot;localhost&quot;, &quot;-u&quot;, &quot;root&quot;, &quot;-p$$MYSQL_ROOT_PASSWORD&quot;]</code>，它指定了要执行的命令及其参数。具体解释如下：</p> <ul><li><p><code>mysqladmin</code>：指定要执行的命令是 <code>mysqladmin</code>，它是 MySQL 数据库管理工具。</p></li> <li><p><code>ping</code>：<code>mysqladmin</code> 命令的参数之一，表示执行 <code>ping</code> 操作，用于检查 MySQL 服务器的可用性。</p></li> <li><p><code>-h localhost</code>：<code>mysqladmin</code> 命令的参数，指定了 MySQL 服务器的主机名为 localhost。</p></li> <li><p><code>-u root</code>：<code>mysqladmin</code> 命令的参数，指定了要使用的用户名为 root。</p></li> <li><p><code>-p$$MYSQL_ROOT_PASSWORD</code>：<code>mysqladmin</code> 命令的参数，指定了要使用的密码。<code>$$MYSQL_ROOT_PASSWORD</code> 是一个环境变量的引用，表示要使用的密码值存储在名为 <code>MYSQL_ROOT_PASSWORD</code> 的环境变量中。</p></li></ul> <p>因此，整个 <code>test</code> 字段指定了在健康检查中执行的命令是 <code>mysqladmin ping -h localhost -u root -p$$MYSQL_ROOT_PASSWORD</code>，它会检查 MySQL 服务器是否可用。</p></li> <li><p>如何判断容器是否支持健康检查</p> <p>要确定容器是否支持健康检查，可以查看容器镜像的文档或元数据，以确定是否包含有关健康检查的信息。以下是几种确定容器是否支持健康检查的方法：</p> <ol><li><p>查看容器镜像的文档：容器镜像通常会提供相应的文档，其中包含有关容器的详细信息，包括是否支持健康检查以及如何配置和使用健康检查功能。</p></li> <li><p>查看容器镜像的元数据：使用 Docker 命令 <code>docker inspect &lt;image&gt;</code> 查看容器镜像的元数据。在返回的 JSON 数据中，可以搜索与健康检查相关的字段，例如 <code>&quot;Healthcheck&quot;</code> 字段。如果该字段存在并包含有关健康检查的信息，则表示该容器镜像支持健康检查。</p></li> <li><p>检查容器镜像的 Dockerfile：如果您有容器镜像的 Dockerfile 文件，可以查看其中是否包含有关健康检查的相关指令，例如 <code>HEALTHCHECK</code>。这个指令用于定义容器的健康检查命令和参数。</p></li></ol> <p>请注意，支持健康检查的容器镜像可能会有不同的实现方式和配置选项。因此，最好参考容器镜像的官方文档或相关资源，以了解如何正确配置和使用健康检查功能。</p></li></ul> <h3 id="参考资料-2"><a href="#参考资料-2" class="header-anchor">#</a> 参考资料</h3> <p><a href="https://docs.docker.com/compose/" target="_blank" rel="noopener noreferrer">官网Docker Compose<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://www.runoob.com/docker/docker-compose.html" target="_blank" rel="noopener noreferrer">Docker Compose菜鸟教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_9-docker-file"><a href="#_9-docker-file" class="header-anchor">#</a> 9.docker file</h2> <h3 id="docker-file概念"><a href="#docker-file概念" class="header-anchor">#</a> docker file概念</h3> <p>Dockerfile是自动构建docker镜像的配置文件，将镜像构建过程通过指令的方式定义在Dockerfile中。配合<code>docker build</code>命令行可以实现自动化的Docker镜像的构建。</p> <h3 id="docke-file-编写规范"><a href="#docke-file-编写规范" class="header-anchor">#</a> docke file 编写规范</h3> <ul><li>每条指令（每行开头关键字）都必须是大写字母</li> <li>执行顺序是按照编写顺序从上到下</li> <li># 表示注释</li></ul> <h3 id="dockerfile指令详解"><a href="#dockerfile指令详解" class="header-anchor">#</a> Dockerfile指令详解</h3> <ul><li><p>FROM</p> <p>镜像从那里来</p></li> <li><p>MAINTAINER</p> <p>镜像维护者信息</p></li> <li><p>RUN</p> <p>构建镜像执行的命令，每一次RUN都会构建一层</p></li> <li><p>CMD</p> <p>容器启动的命令，如果有多个则以最后一个为准，也可以为ENTRYPOINT提供参数</p></li> <li><p>VOLUME</p> <p>定义数据卷，如果没有定义则使用默认</p></li> <li><p>USER</p> <p>指定后续执行的用户组和用户</p></li> <li><p>WORKDIR</p> <p>切换当前执行的工作目录</p></li> <li><p>HEALTHCHECH</p> <p>健康检测指令</p></li> <li><p>ARG</p> <p>变量属性值，但不在容器内部起作用</p></li> <li><p>EXPOSE</p> <p>暴露容器端口</p></li> <li><p>ENV</p> <p>变量属性值，容器内部也会起作用</p></li> <li><p>ADD</p> <p>添加文件，如果是压缩文件也解压</p></li> <li><p>COPY</p> <p>复制文件或目录到镜像中，格式 <code>COPY source destination</code> source 代表宿主机 destination代表容器</p></li> <li><p>ENTRYPOINT</p> <p>容器进入时执行的命令</p></li></ul> <h3 id="制作自己的镜像"><a href="#制作自己的镜像" class="header-anchor">#</a> 制作自己的镜像</h3> <ul><li><p>编写Dockerfile</p> <p>使用<code>ruoyi-admin.jar</code>,在ruoyi-admin目录下编写Dockerfile</p> <p>目录结构</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[root@gitlab app]# ll
total 74004
-rw-r--r--. 1 root root      113 Aug  4 16:02 Dockerfile
-rw-r--r--. 1 root root 75774628 Aug  4 09:21 ruoyi-admin.jar
drwxr-xr-x. 2 root root       82 Aug  4 09:47 sql
[root@gitlab app]# pwd
/home/app
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Dockerfile文件内容</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>FROM openjdk:8u342-jre
WORKDIR /app
COPY ./ruoyi-admin.jar .
CMD [ &quot;java&quot;, &quot;-jar&quot;, &quot;ruoyi-admin.jar&quot; ]
EXPOSE 80
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul> <h3 id="dockfile中涉及的指令"><a href="#dockfile中涉及的指令" class="header-anchor">#</a> Dockfile中涉及的指令</h3> <ul><li><p>构建打包命令</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># Dockerfile 在WORKDIR目录下，如上一节制作自己镜像举例</span>
<span class="token function">docker</span> build <span class="token builtin class-name">.</span>
<span class="token comment"># Dockerfile 在 /home/dockerfile 目录下 ，使用 -f指定Dockerfile 文件，注意 /home/app/为构建上下文路径，必须要填</span>
<span class="token function">docker</span> build <span class="token parameter variable">-f</span> /home/dockerfile/Dockerfile  /home/app/ <span class="token parameter variable">-t</span> ruoyi-app2:4.7.6
<span class="token comment"># -t 参数指定image 的name,tag</span>
<span class="token function">docker</span> build <span class="token parameter variable">-t</span> ruoyi-app-1:4.7.5 <span class="token builtin class-name">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>设置镜像的标签</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> tag 79d007b05ff6 ruoyi-app:4.7.4-jar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>执行 <code>docker build .</code> 打包的镜像默认是没有 name 和 tag 的可以使用 <code>docker tag</code>设置镜像的标签。</p></blockquote></li></ul> <h3 id="image镜像和layer层"><a href="#image镜像和layer层" class="header-anchor">#</a> image镜像和layer层</h3> <p>在Docker中，镜像（Image）和层（Layer）是两个相关但不同的概念。</p> <ul><li><p>镜像</p> <p>镜像是一个只读的文件系统，它包含了运行一个容器所需的所有文件和配置。镜像可以看作是一个容器的模板或快照，可以用来创建和运行多个相同配置的容器实例。</p></li> <li><p>层(Layer)</p> <p>层是构成镜像的基本组成部分。每个镜像由一系列层组成，每个层都包含了对文件系统的一组更改。每个层都是只读的，并且可以被其他层共享和重用。这种层次结构的设计使得镜像可以非常高效地进行存储和传输，因为只有发生更改的层才需要被添加或更新。当你构建一个镜像时，每个指令（如 <code>FROM</code>、<code>COPY</code>、<code>RUN</code> 等）都会创建一个新的层。这些指令在 Dockerfile 中按顺序执行，每个指令都会在前一个层的基础上进行更改，并生成一个新的层。每个层都有一个唯一的标识符，通常是一个 SHA256 哈希值。这个标识符用于检查和比较层的内容，以确保镜像的完整性和一致性。</p> <blockquote><p>当你使用 <code>docker build</code> 命令构建镜像时，Docker 构建引擎会根据 Dockerfile 中的指令逐步执行，并在每个指令的基础上创建新的层。这些层将组合成最终的镜像。在构建过程中，每个层都可以被缓存和重用。这意味着如果你对 Dockerfile 进行了修改，但只有部分指令发生了变化，那么只有受到影响的层及其后续层才会重新构建，而之前的层将从缓存中获取。这种层的机制使得镜像的构建和分发变得高效和可重复。它还允许你创建基于现有镜像的定制镜像，只需在现有镜像的基础上添加或修改一些层即可，而无需重新构建整个镜像。</p></blockquote></li></ul> <h3 id="多阶段构建"><a href="#多阶段构建" class="header-anchor">#</a> 多阶段构建</h3> <ul><li><p>概念</p> <p>Dockerfile 多阶段构建是一种在 Dockerfile 中使用多个构建阶段来构建镜像的方法。它可以帮助减小最终镜像的大小，同时保持构建过程的清晰性和可维护性。</p> <p>多阶段构建的基本思想是在一个 Dockerfile 中定义多个构建阶段（stage），每个阶段都可以有自己的基础镜像和指令。每个阶段都可以生成一个中间镜像，但只有最后一个阶段的镜像会被保留为最终的镜像。</p></li> <li><p>实例</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>FROM maven AS build
WORKDIR /source
COPY <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span>
RUN mvn package

FROM  openjdk:8u342-jre
WORKDIR /app
COPY <span class="token parameter variable">--from</span><span class="token operator">=</span>build /source/ruoyi-admin/target/ruoyi-admin.jar <span class="token builtin class-name">.</span>
EXPOSE <span class="token number">80</span>
ENTRYPOINT <span class="token punctuation">[</span><span class="token string">&quot;java&quot;</span>,<span class="token string">&quot;-jar&quot;</span>,<span class="token string">&quot;ruoyi-admin.jar&quot;</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p>使用 Maven来构建应用，在最终的image中不需要包含maven。我们可以使用多阶段构建，每一个阶段从<code>FROM</code>开始，最终的image只会从最后一个阶段构建，不会包含前面阶段产生的层，因此可以减少镜像体积。</p></blockquote></li></ul> <h3 id="dockerfile参考资料"><a href="#dockerfile参考资料" class="header-anchor">#</a> Dockerfile参考资料</h3> <ul><li><p>官网</p> <p><a href="https://docs.docker.com/engine/reference/builder/" target="_blank" rel="noopener noreferrer">Dockerfile reference<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>博客</p> <p><a href="https://zimug.blog.csdn.net/article/details/124441548" target="_blank" rel="noopener noreferrer">逐行解析Nginx镜像Dockerfile(学习经典)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://zimug.blog.csdn.net/article/details/124906253" target="_blank" rel="noopener noreferrer">使用Dockerfile构建镜像<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <h2 id="_10-私有仓库"><a href="#_10-私有仓库" class="header-anchor">#</a> 10. 私有仓库</h2> <h3 id="背景"><a href="#背景" class="header-anchor">#</a> 背景</h3> <p>我们可以使用<code>docker push</code>将自己的image推送到docker hub中进行共享，但是在实际工作中，很多公司的代码不能上传到公开的仓库中，因此我们可以创建自己的镜像仓库。</p> <h3 id="docker-registry"><a href="#docker-registry" class="header-anchor">#</a> docker registry</h3> <p>docker 官网提供了一个docker registry的私有仓库项目，可以方便的通过docker部署。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 部署私有仓库 docker registry</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">5000</span>:5000 <span class="token parameter variable">--restart</span> always <span class="token parameter variable">--name</span> registry registry:2
<span class="token comment"># 给一个现有的本地镜像 &quot;ruoyi-java:4.7.4&quot; 打标签，以便将其推送到本地的 Docker Registry。</span>
<span class="token function">docker</span> image tag ruoyi-java:4.7.4 localhost:5000/ruoyi-java:4.7.4
<span class="token comment"># 将本地的镜像推送到指定的 Docker Registry。</span>
<span class="token function">docker</span> push localhost:5000/ruoyi-java:4.7.4
<span class="token comment"># 从指定的 Docker Registry 拉取镜像到本地。</span>
<span class="token function">docker</span> pull localhost:5000/ruoyi-java:4.7.4
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>为了避免推送报错，可以修改<code>/etc/docker/daemon.json</code>，加入</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;insecure-registries&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;192.168.35.106:5000&quot;</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这是因为<code>docker push</code>默认使用<code>HTTPS</code>协议，而服务端的<code>registry</code>仓库使用的是<code>HTTP</code>。</p> <h3 id="harbor"><a href="#harbor" class="header-anchor">#</a> harbor</h3> <p>habor是一个功能更强大镜像仓库，它具有完整的权限控制和Web界面，更符合我们的实际工作场景。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 创建目录</span>
<span class="token function">mkdir</span> harbor
<span class="token comment"># 下载安装包</span>
<span class="token function">wget</span> https://github.com/bitnami/containers/archive/main.tar.gz
<span class="token comment"># 解压安装包</span>
<span class="token function">tar</span> <span class="token parameter variable">-xzvf</span> containers-main.tar.gz
<span class="token comment"># 进入安装目录</span>
<span class="token builtin class-name">cd</span> containers-main/bitnami/harbor-portal
<span class="token comment"># 执行docker compose命令启动容器</span>
<span class="token function">docker</span> compose up <span class="token parameter variable">-d</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>浏览器访问：<a href="http://192.168.35.106/harbor/projects" target="_blank" rel="noopener noreferrer">http://192.168.35.106<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，默认用户名/密码：<code>admin/bitnami</code></p> <h3 id="镜像的保存和加载"><a href="#镜像的保存和加载" class="header-anchor">#</a> 镜像的保存和加载</h3> <ul><li><p>背景</p> <p>当我们处于离线状态，比如在很多内网上不能访问互联网，这时候不能通过镜像仓库的方式共享image，我们可以使用导出和导入功能，手动拷贝镜像。</p></li> <li><p>常用命令</p> <p><code>docker save</code></p> <p>会包含所有层，以及所有标签 + 版本信息。</p> <p><code>docker save alpine:3.15 &gt; alpine-3.15.tar</code></p> <p>保存image</p> <p><code>docker rmi alpine:3.15</code></p> <p>删除本地image</p> <p><code>docker load &lt; alpine-3.15.tar</code></p> <p>加载image</p></li> <li><p>注意事项</p> <p>不要跟export和import命令混淆</p> <p><code>docker save/load IMAGE</code> save和load操作的是镜像</p> <p><code>docker export/import CONTAINER</code>export和import操作对象是容器</p> <p>image包含多个层，每一层都不可变，save保存的信息包含每个层和所有标签 + 版本信息。</p> <p>容器运行的时候会创建一个可写入的容器层，所有的更改都写入容器层，export导出的只有容器层，不包含父层和标签信息。</p></li></ul> <h3 id="一些设置"><a href="#一些设置" class="header-anchor">#</a> 一些设置</h3> <ul><li><p>设置hosts</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@gitlab harbor-portal<span class="token punctuation">]</span><span class="token comment"># vi /etc/hosts</span>
<span class="token number">192.168</span>.35.106 reg.mydomain.com
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p><code>reg.mydomain.com</code>是这个镜像自带的域名。</p></blockquote></li> <li><p>设置 insecure</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># 在ExecStart后面加入--insecure-registry=192.168.35.106
[root@gitlab harbor-portal]# vi /usr/lib/systemd/system/docker.service
ExecStart=/usr/bin/dockerd --insecure-registry=192.168.35.106
# 改完需要重启docker 服务
systemctl daemon-reload
systemctl reload docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>在 Docker 服务的 systemd 配置文件 <code>/usr/lib/systemd/system/docker.service</code> 中，通过设置 <code>--insecure-registry</code> 参数为 <code>192.168.35.106</code>，是为了将该 IP 地址的仓库（Registry）标记为不安全的，即 Docker 客户端可以与该仓库建立非 HTTPS 的连接。</p> <p>默认情况下，Docker 客户端只允许与使用 HTTPS 协议的仓库进行通信，以确保数据传输的安全性。然而，有些仓库可能没有配置 HTTPS，而是使用 HTTP 进行通信。为了允许 Docker 客户端与这类不安全的仓库进行通信，可以使用 <code>--insecure-registry</code> 参数来标记这些仓库为不安全。</p> <p>在你提供的配置中，<code>--insecure-registry=192.168.35.106</code> 表示将 <code>192.168.35.106</code> 标记为不安全的仓库，允许 Docker 客户端与其建立非 HTTPS 的连接。这样，Docker 客户端就可以与该仓库进行正常的推送（push）和拉取（pull）操作。</p> <p>请注意，使用不安全的仓库可能存在安全风险，因为数据传输未加密。建议在生产环境中使用安全的 HTTPS 仓库，以确保数据的机密性和完整性。</p></blockquote></li> <li><p>设置优先私有仓库拉取</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 增加私有仓库地址</span>
<span class="token punctuation">[</span>root@gitlab harbor-portal<span class="token punctuation">]</span><span class="token comment"># cat /etc/docker/daemon.json </span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;registry-mirrors&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
   <span class="token string">&quot;https://192.168.35.106&quot;</span>,
    <span class="token string">&quot;https://registry.docker-cn.com&quot;</span>,
    <span class="token string">&quot;http://hub-mirror.c.163.com&quot;</span>,
    <span class="token string">&quot;https://fsp2sfpr.mirror.aliyuncs.com/&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li> <li><p>推送设置</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 1.给镜像打标签</span>
<span class="token comment"># 将本地的镜像标记为你的私有仓库的地址和相应的标签</span>
<span class="token punctuation">[</span>root@gitlab harbor-portal<span class="token punctuation">]</span><span class="token comment"># docker tag ruoyi-app2:4.7.6 192.168.35.106/harbor/ruoyi-app:4.7.9</span>
<span class="token comment"># 2.登录docker 私有仓库</span>
<span class="token comment"># 使用 docker login 命令登录到你的私有仓库。这将要求你提供私有仓库的地址和认证凭据。</span>
<span class="token punctuation">[</span>root@gitlab harbor-portal<span class="token punctuation">]</span><span class="token comment"># docker login 192.168.35.106</span>
Authenticating with existing credentials<span class="token punctuation">..</span>.
WARNING<span class="token operator">!</span> Your password will be stored unencrypted <span class="token keyword">in</span> /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/<span class="token comment">#credentials-store</span>

Login Succeeded
<span class="token comment"># 3.推送到远端私有仓库</span>
<span class="token comment"># 使用 docker push 命令将标记的镜像推送到远程私有仓库。</span>
<span class="token punctuation">[</span>root@gitlab harbor-portal<span class="token punctuation">]</span><span class="token comment"># docker push 192.168.35.106/harbor/ruoyi-app:4.7.9</span>
The push refers to repository <span class="token punctuation">[</span><span class="token number">192.168</span>.35.106/harbor/ruoyi-app<span class="token punctuation">]</span>
999b7a88f264: Mounted from harbor/ruoyi-java 
ac1c3fe6b031: Mounted from harbor/ruoyi-java 
1aaddf64804f: Mounted from harbor/ruoyi-java 
990c5138f5d1: Mounted from harbor/ruoyi-java 
5c384ea5f752: Mounted from harbor/ruoyi-java 
293d5db30c9f: Mounted from harbor/ruoyi-java 
03127cdb479b: Mounted from harbor/ruoyi-java 
9c742cd6c7a5: Mounted from harbor/ruoyi-java 
<span class="token number">4.7</span>.9: digest: sha256:c6b234b64a628296eba42f45489c2dc5673a724e7a8e12cd3e8d64ab025dc655 size: <span class="token number">2001</span>
<span class="token comment"># 4.从私有仓库拉取镜像</span>
<span class="token comment"># 使用 docker pull 命令从私有仓库拉取镜像。</span>
<span class="token punctuation">[</span>root@gitlab harbor-portal<span class="token punctuation">]</span><span class="token comment"># docker pull 192.168.35.106/harbor/ruoyi-app:4.7.9</span>
<span class="token number">4.7</span>.9: Pulling from harbor/ruoyi-app
Digest: sha256:c6b234b64a628296eba42f45489c2dc5673a724e7a8e12cd3e8d64ab025dc655
Status: Downloaded newer image <span class="token keyword">for</span> <span class="token number">192.168</span>.35.106/harbor/ruoyi-app:4.7.9
<span class="token number">192.168</span>.35.106/harbor/ruoyi-app:4.7.9
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><blockquote><p><code>docker tag</code> 是 <code>docker image tag</code> 的缩写显示，官方推荐使用 <code>docker image tag</code>,两个命令的使用效果是等效的。使用这两个命令，你可以给一个已有的 Docker 镜像打上新的标签，使其具有多个标签。这在镜像管理和版本控制中非常有用。</p></blockquote></li></ul> <h2 id="_11-windows-安装docker"><a href="#_11-windows-安装docker" class="header-anchor">#</a> 11. windows 安装docker</h2> <h3 id="参考资料-3"><a href="#参考资料-3" class="header-anchor">#</a> 参考资料</h3> <p><a href="https://docker.easydoc.net/doc/81170005/cCewZWoN/lTKfePfP" target="_blank" rel="noopener noreferrer">Docker 简介和安装<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_12-portainer安装"><a href="#_12-portainer安装" class="header-anchor">#</a> 12. portainer安装</h2> <h3 id="概念"><a href="#概念" class="header-anchor">#</a> 概念</h3> <p>Portainer是一个可视化的Docker管理系统，功能十分全面，提供状态显示面板、应用模板快速部署、容器镜像、网络、数据卷的基本操作、事件日志显示、容器控制台操作、登录用户管理和控制等功能。</p> <h3 id="部署"><a href="#部署" class="header-anchor">#</a> 部署</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> volume create portainer_data

<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">8000</span>:8000 <span class="token parameter variable">-p</span> <span class="token number">9000</span>:9000 
<span class="token parameter variable">-v</span> /var/run/docker.sock:/var/run/docker.sock 
<span class="token parameter variable">-v</span> portainer_data:/data 
<span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token parameter variable">--name</span> portainer portainer/portainer-ce
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>打开浏览器访问 http://192.168.35.106:9000,按提示创建用户登录。</p> <h3 id="容器重启策略"><a href="#容器重启策略" class="header-anchor">#</a> 容器重启策略</h3> <p>容器的重启策略。由<code>--restart</code>参数决定。有以下选项</p> <ul><li><p><code>--restart=no</code></p> <p>默认为no，不会自动重启容器。</p></li> <li><p><code>--restart=always</code></p> <p>当容器停止运行时，总是重启容器。当我们重启docker进程时，也会自动重启容器。如果我们使用<code>docker stop</code>停止容器时，则不会自动重启容器。</p></li> <li><p><code>--restart=on-failure</code></p> <p>在容器非正常退出时（退出状态非0），才会重启容器</p></li> <li><p><code>--restart=on-failure:10</code></p> <p>仅当容器以异常状态退出时，才重启容器。若重启不成功，最多尝试重启 10次。</p></li> <li><p><code>--restart=unless-stopped</code></p> <p>当我们重启docker时，若这个容器已经处停止状态，则不进行自动重启。</p></li></ul> <h2 id="_13-docker-安装常见数据库"><a href="#_13-docker-安装常见数据库" class="header-anchor">#</a> 13.docker 安装常见数据库</h2> <h3 id="docker-安装oracle11g"><a href="#docker-安装oracle11g" class="header-anchor">#</a> docker 安装oracle11g</h3> <ul><li><p>创建数据共享目录</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /oracle11g/oradata <span class="token operator">&amp;&amp;</span> <span class="token function">chmod</span> <span class="token number">777</span> /oracle11g/oradata
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>拉取镜像</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker pull registry.cn-hangzhou.aliyuncs.com/helowin/oracle_11g
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>创建容器</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker run -d --restart=always --privileged=true -p 1522:1522 -p 5501:5501 --name oracle11g -v /oracle11g/oradata:/oracle11g/oradata registry.cn-hangzhou.aliyuncs.com/helowin/oracle_11g
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>注意这里的暴露端口为1522,与oralce默认监听端口1521不一致，需要进入容器<a href="https://my.oschina.net/u/4362820/blog/3574754" target="_blank" rel="noopener noreferrer">修改oracle默认监听端口<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>,注意在容器内修改端口，只需要更改端口<code>PORT</code>,不需要更改<code>HOST</code></p></blockquote></li> <li><p>查看oracle11g容器是否创建成功</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker ps -a
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>进入镜像镜像进行配置</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker exec -it oracle11g /bin/bash
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>切换到root下进行配置</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>su root （密码：helowin）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>编辑profile文件配置ORACLE环境变量</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>vi /etc/profile
# 添加：
export ORACLE_HOME=/home/oracle/app/oracle/product/11.2.0/dbhome_2
export ORACLE_SID=helowin
export PATH=$ORACLE_HOME/bin:$PATH
# 环境生效
source /etc/profile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p>创建软连接</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ln -s $ORACLE_HOME/bin/sqlplus /usr/bin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>切换到oracle 用户</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>su - oracle
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>登录sqlplus并修改sys、system用户密码</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sqlplus /nolog
conn /as sysdba
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>修改sys、system用户密码并刷新权限</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>alter user system identified by <span class="token number">123456</span><span class="token punctuation">;</span>
alter user sys identified by <span class="token number">123456</span><span class="token punctuation">;</span>
<span class="token comment"># 设置密码生效策略</span>
ALTER PROFILE DEFAULT LIMIT PASSWORD_LIFE_TIME UNLIMITED<span class="token punctuation">;</span>
<span class="token builtin class-name">exit</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>查看oracle实例</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>oracle@177c1d8c514a ~<span class="token punctuation">]</span>$ lsnrctl status
<span class="token punctuation">[</span>oracle@177c1d8c514a ~<span class="token punctuation">]</span>$ <span class="token builtin class-name">exit</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>用nacivat连接oracle数据库</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>服务名：helowin（一定要填写helowin）
用户名：system
密码：123456（第10步设置的密码）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <h3 id="docker-安装oracle12c"><a href="#docker-安装oracle12c" class="header-anchor">#</a> docker 安装oracle12c</h3> <ul><li><p>创建数据共享目录</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mkdir -p /home/nicemoe/oradata &amp;&amp; chmod 777 /home/nicemoe/oradata
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>拉取镜像</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker pull registry.cn-hangzhou.aliyuncs.com/zhuyijun/oracle-12c
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>启动容器</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker run -d --restart=always --privileged=true --name myoracle -p 1521:1521 -p 5500:5500 -e ORACLE_SID=ORCLCDB -e ORACLE_PDB=orclpdb1 -e ORACLE_PWD=123456 -e ORACLE_CHARACTERSET=zhs16gbk -e ORACLE_BASE=/opt/oracle -e ORACLE_HOME=/opt/oracle/product/12.2.0.1/dbhome_1 -e PATH=/opt/oracle/product/12.2.0.1/dbhome_1/bin:/opt/oracle/product/12.2.0.1/dbhome_1/OPatch/:/usr/sbin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin -v /home/nicemoe/oradata:/opt/oracle/oradata registry.cn-hangzhou.aliyuncs.com/zhuyijun/oracle-12c:latest
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>修改密码</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker exec  &lt;container name&gt; ./setPassword.sh &lt;your password&gt;
例如：
docker exec  a5f5a90ec826 ./setPassword.sh 123456
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>注意要在容器启动后在执行，不然报错。</p></blockquote></li> <li><p>登录数据库</p> <p><img src="/blog/docker.assets/image-20221124131751484.png" alt="image-20221124131751484"></p></li> <li><p>参考资料</p> <p><a href="https://blog.csdn.net/qq_26018075/article/details/107844316" target="_blank" rel="noopener noreferrer">docker安装orcale-12c<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://blog.csdn.net/GeorgeChan_/article/details/124040161" target="_blank" rel="noopener noreferrer">Oracle数据库CDB与PDB<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://blog.csdn.net/lixiangss1993/article/details/121677355" target="_blank" rel="noopener noreferrer">oracle12c19c创建用户<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://blog.csdn.net/ctypyb2002/article/details/97250017" target="_blank" rel="noopener noreferrer">jdbc连接oracle常见两种方式 OCI THIN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <h3 id="docker-安装sqlserver2017"><a href="#docker-安装sqlserver2017" class="header-anchor">#</a> docker 安装sqlserver2017</h3> <ul><li><p>创建数据共享目录</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mkdir -p /sqlserver2017/sqlserver-data &amp;&amp; chmod 777 /sqlserver2017/sqlserver-data
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>拉取镜像</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker pull mcr.microsoft.com/mssql/server:2017-latest
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>启动容器</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker run -e &quot;ACCEPT_EULA=Y&quot; -e &quot;SA_PASSWORD=qwe20211114.&quot; -p 1433:1433 --name sqlserver2017 -d --restart=always --privileged=true -v /sqlserver2017/sqlserver-data:/sqlserver2017/sqlserver-data mcr.microsoft.com/mssql/server:2017-latest
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>注意这个SA_PASSWORD必须要是强密码，不然不通过</p> <p>保证安装内存2G及以上</p></blockquote></li> <li><p>进入容器</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># 1.进入容器
docker exec -it sqlserver2017 /bin/bash
# 2.登录数据库
/opt/mssql-tools/bin/sqlcmd -S localhost -U SA -P &quot;qwe20211114.&quot;
# 3.查询数据库
select name from sys.Databases
go
# 4.创建数据库
create database flinktest
go
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li> <li><p>远程连接</p> <p><img src="/blog/docker.assets/image-20221124133520135.png" alt="image-20221124133520135"></p></li> <li><p>参考资料</p> <p><a href="https://blog.csdn.net/qq_19309473/article/details/121313368" target="_blank" rel="noopener noreferrer">Docker 安装 SQL Server教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <h2 id="_14-docker-参考教程"><a href="#_14-docker-参考教程" class="header-anchor">#</a> 14. DOCKER 参考教程</h2> <h3 id="docker-基本管理"><a href="#docker-基本管理" class="header-anchor">#</a> Docker 基本管理</h3> <p><a href="https://juejin.cn/post/7168058169472581646" target="_blank" rel="noopener noreferrer">Docker 基本管理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="docker-容器管理"><a href="#docker-容器管理" class="header-anchor">#</a> Docker 容器管理</h3> <p><a href="https://juejin.cn/post/7168667291809218573" target="_blank" rel="noopener noreferrer">Docker 容器管理 <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="docker的网络"><a href="#docker的网络" class="header-anchor">#</a> Docker的网络</h3> <p><a href="https://juejin.cn/post/7169025398628597767" target="_blank" rel="noopener noreferrer">Docker的网络<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="docker-cgroups资源控制管理"><a href="#docker-cgroups资源控制管理" class="header-anchor">#</a> Docker Cgroups资源控制管理</h3> <p><a href="https://juejin.cn/post/7169433873514758180" target="_blank" rel="noopener noreferrer">Docker Cgroups资源控制管理 <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="docker-数据管理-数据卷、容器互联"><a href="#docker-数据管理-数据卷、容器互联" class="header-anchor">#</a> docker 数据管理(数据卷、容器互联)</h3> <p><a href="https://juejin.cn/post/7170311038879924261" target="_blank" rel="noopener noreferrer">docker 数据管理(数据卷、容器互联) <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="基于dockerfile创建镜像"><a href="#基于dockerfile创建镜像" class="header-anchor">#</a> 基于Dockerfile创建镜像</h3> <p><a href="https://juejin.cn/post/7170710426794065933" target="_blank" rel="noopener noreferrer">基于Dockerfile创建镜像 <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="docker-compose单机编排"><a href="#docker-compose单机编排" class="header-anchor">#</a> docker-Compose单机编排</h3> <p><a href="https://juejin.cn/post/7171727144400519205" target="_blank" rel="noopener noreferrer">docker-Compose单机编排<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="docker-harbor私有仓库部署与管理"><a href="#docker-harbor私有仓库部署与管理" class="header-anchor">#</a> docker - harbor私有仓库部署与管理</h3> <p><a href="https://juejin.cn/post/7172968486019268638" target="_blank" rel="noopener noreferrer">docker - harbor私有仓库部署与管理 <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="docker-consul的容器服务更新与发现"><a href="#docker-consul的容器服务更新与发现" class="header-anchor">#</a> docker consul的容器服务更新与发现</h3> <p><a href="https://juejin.cn/post/7173240268659884046" target="_blank" rel="noopener noreferrer">docker consul的容器服务更新与发现 <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/blog/handbook/devops/nginx.html">
          Nginx
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-7115df4a data-v-1c636796><li class="level-2" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#_1-docker基本概念" class="sidebar-link reco-side-_1-docker基本概念" data-v-7115df4a>1.docker基本概念</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker是什么" class="sidebar-link reco-side-docker是什么" data-v-7115df4a>Docker是什么</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#项目部署的三个阶段" class="sidebar-link reco-side-项目部署的三个阶段" data-v-7115df4a>项目部署的三个阶段</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker出现原因" class="sidebar-link reco-side-docker出现原因" data-v-7115df4a>Docker出现原因</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker优点" class="sidebar-link reco-side-docker优点" data-v-7115df4a>Docker优点</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#容器和虚拟机的区别" class="sidebar-link reco-side-容器和虚拟机的区别" data-v-7115df4a>容器和虚拟机的区别</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker学习网站" class="sidebar-link reco-side-docker学习网站" data-v-7115df4a>Docker学习网站</a></li><li class="level-2" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#_2-docker安装" class="sidebar-link reco-side-_2-docker安装" data-v-7115df4a>2.docker安装</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker卸载" class="sidebar-link reco-side-docker卸载" data-v-7115df4a>docker卸载</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#在线安装" class="sidebar-link reco-side-在线安装" data-v-7115df4a>在线安装</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#离线安装" class="sidebar-link reco-side-离线安装" data-v-7115df4a>离线安装</a></li><li class="level-2" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#_3-docker概念与执行流程" class="sidebar-link reco-side-_3-docker概念与执行流程" data-v-7115df4a>3.docker概念与执行流程</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#容器化平台" class="sidebar-link reco-side-容器化平台" data-v-7115df4a>容器化平台</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker引擎" class="sidebar-link reco-side-docker引擎" data-v-7115df4a>Docker引擎</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#容器-镜像-registry-镜像仓库" class="sidebar-link reco-side-容器-镜像-registry-镜像仓库" data-v-7115df4a>容器,镜像,registry 镜像仓库</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker执行流程" class="sidebar-link reco-side-docker执行流程" data-v-7115df4a>Docker执行流程</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker-pull-命令详解" class="sidebar-link reco-side-docker-pull-命令详解" data-v-7115df4a>docker pull 命令详解</a></li><li class="level-2" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#_4-docker常用命令" class="sidebar-link reco-side-_4-docker常用命令" data-v-7115df4a>4.docker常用命令</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#万能帮助命令" class="sidebar-link reco-side-万能帮助命令" data-v-7115df4a>万能帮助命令</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#常用命令" class="sidebar-link reco-side-常用命令" data-v-7115df4a>常用命令</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#镜像常用命令" class="sidebar-link reco-side-镜像常用命令" data-v-7115df4a>镜像常用命令</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#容器常用命令" class="sidebar-link reco-side-容器常用命令" data-v-7115df4a>容器常用命令</a></li><li class="level-2" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#_5-docker网络" class="sidebar-link reco-side-_5-docker网络" data-v-7115df4a>5.docker网络</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker网络分类" class="sidebar-link reco-side-docker网络分类" data-v-7115df4a>docker网络分类</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#用户自定义网络" class="sidebar-link reco-side-用户自定义网络" data-v-7115df4a>用户自定义网络</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker主机名" class="sidebar-link reco-side-docker主机名" data-v-7115df4a>docker主机名</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker容器间通信方式总结" class="sidebar-link reco-side-docker容器间通信方式总结" data-v-7115df4a>docker容器间通信方式总结</a></li><li class="level-2" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#_6-docker数据存储" class="sidebar-link reco-side-_6-docker数据存储" data-v-7115df4a>6.docker数据存储</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker存储概念" class="sidebar-link reco-side-docker存储概念" data-v-7115df4a>docker存储概念</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#数据存储的方式" class="sidebar-link reco-side-数据存储的方式" data-v-7115df4a>数据存储的方式</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#数据卷的删除" class="sidebar-link reco-side-数据卷的删除" data-v-7115df4a>数据卷的删除</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#参考资料" class="sidebar-link reco-side-参考资料" data-v-7115df4a>参考资料</a></li><li class="level-2" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#_7-部署自己的应用" class="sidebar-link reco-side-_7-部署自己的应用" data-v-7115df4a>7. 部署自己的应用</a></li><li class="level-2" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#_8-docker-compose" class="sidebar-link reco-side-_8-docker-compose" data-v-7115df4a>8.docker compose</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker-compose概念" class="sidebar-link reco-side-docker-compose概念" data-v-7115df4a>Docker Compose概念</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#出现原因" class="sidebar-link reco-side-出现原因" data-v-7115df4a>出现原因</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#一键部署wordpress" class="sidebar-link reco-side-一键部署wordpress" data-v-7115df4a>一键部署wordpress</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker-compose常用命令" class="sidebar-link reco-side-docker-compose常用命令" data-v-7115df4a>docker compose常用命令</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#compose文件结构" class="sidebar-link reco-side-compose文件结构" data-v-7115df4a>compose文件结构</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#yaml语法" class="sidebar-link reco-side-yaml语法" data-v-7115df4a>YAML语法</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#vscode-remote-ssh插件" class="sidebar-link reco-side-vscode-remote-ssh插件" data-v-7115df4a>VSCode Remote SSH插件</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#编排自己的项目" class="sidebar-link reco-side-编排自己的项目" data-v-7115df4a>编排自己的项目</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#容器启动顺序" class="sidebar-link reco-side-容器启动顺序" data-v-7115df4a>容器启动顺序</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#参考资料-2" class="sidebar-link reco-side-参考资料-2" data-v-7115df4a>参考资料</a></li><li class="level-2" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#_9-docker-file" class="sidebar-link reco-side-_9-docker-file" data-v-7115df4a>9.docker file</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker-file概念" class="sidebar-link reco-side-docker-file概念" data-v-7115df4a>docker file概念</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docke-file-编写规范" class="sidebar-link reco-side-docke-file-编写规范" data-v-7115df4a>docke file 编写规范</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#dockerfile指令详解" class="sidebar-link reco-side-dockerfile指令详解" data-v-7115df4a>Dockerfile指令详解</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#制作自己的镜像" class="sidebar-link reco-side-制作自己的镜像" data-v-7115df4a>制作自己的镜像</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#dockfile中涉及的指令" class="sidebar-link reco-side-dockfile中涉及的指令" data-v-7115df4a>Dockfile中涉及的指令</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#image镜像和layer层" class="sidebar-link reco-side-image镜像和layer层" data-v-7115df4a>image镜像和layer层</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#多阶段构建" class="sidebar-link reco-side-多阶段构建" data-v-7115df4a>多阶段构建</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#dockerfile参考资料" class="sidebar-link reco-side-dockerfile参考资料" data-v-7115df4a>Dockerfile参考资料</a></li><li class="level-2" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#_10-私有仓库" class="sidebar-link reco-side-_10-私有仓库" data-v-7115df4a>10. 私有仓库</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#背景" class="sidebar-link reco-side-背景" data-v-7115df4a>背景</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker-registry" class="sidebar-link reco-side-docker-registry" data-v-7115df4a>docker registry</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#harbor" class="sidebar-link reco-side-harbor" data-v-7115df4a>harbor</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#镜像的保存和加载" class="sidebar-link reco-side-镜像的保存和加载" data-v-7115df4a>镜像的保存和加载</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#一些设置" class="sidebar-link reco-side-一些设置" data-v-7115df4a>一些设置</a></li><li class="level-2" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#_11-windows-安装docker" class="sidebar-link reco-side-_11-windows-安装docker" data-v-7115df4a>11. windows 安装docker</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#参考资料-3" class="sidebar-link reco-side-参考资料-3" data-v-7115df4a>参考资料</a></li><li class="level-2" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#_12-portainer安装" class="sidebar-link reco-side-_12-portainer安装" data-v-7115df4a>12. portainer安装</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#概念" class="sidebar-link reco-side-概念" data-v-7115df4a>概念</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#部署" class="sidebar-link reco-side-部署" data-v-7115df4a>部署</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#容器重启策略" class="sidebar-link reco-side-容器重启策略" data-v-7115df4a>容器重启策略</a></li><li class="level-2" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#_13-docker-安装常见数据库" class="sidebar-link reco-side-_13-docker-安装常见数据库" data-v-7115df4a>13.docker 安装常见数据库</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker-安装oracle11g" class="sidebar-link reco-side-docker-安装oracle11g" data-v-7115df4a>docker 安装oracle11g</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker-安装oracle12c" class="sidebar-link reco-side-docker-安装oracle12c" data-v-7115df4a>docker 安装oracle12c</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker-安装sqlserver2017" class="sidebar-link reco-side-docker-安装sqlserver2017" data-v-7115df4a>docker 安装sqlserver2017</a></li><li class="level-2" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#_14-docker-参考教程" class="sidebar-link reco-side-_14-docker-参考教程" data-v-7115df4a>14. DOCKER 参考教程</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker-基本管理" class="sidebar-link reco-side-docker-基本管理" data-v-7115df4a>Docker 基本管理</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker-容器管理" class="sidebar-link reco-side-docker-容器管理" data-v-7115df4a>Docker 容器管理</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker的网络" class="sidebar-link reco-side-docker的网络" data-v-7115df4a>Docker的网络</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker-cgroups资源控制管理" class="sidebar-link reco-side-docker-cgroups资源控制管理" data-v-7115df4a>Docker Cgroups资源控制管理</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker-数据管理-数据卷、容器互联" class="sidebar-link reco-side-docker-数据管理-数据卷、容器互联" data-v-7115df4a>docker 数据管理(数据卷、容器互联)</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#基于dockerfile创建镜像" class="sidebar-link reco-side-基于dockerfile创建镜像" data-v-7115df4a>基于Dockerfile创建镜像</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker-compose单机编排" class="sidebar-link reco-side-docker-compose单机编排" data-v-7115df4a>docker-Compose单机编排</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker-harbor私有仓库部署与管理" class="sidebar-link reco-side-docker-harbor私有仓库部署与管理" data-v-7115df4a>docker - harbor私有仓库部署与管理</a></li><li class="level-3" data-v-7115df4a><a href="/blog/handbook/devops/docker.html#docker-consul的容器服务更新与发现" class="sidebar-link reco-side-docker-consul的容器服务更新与发现" data-v-7115df4a>docker consul的容器服务更新与发现</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-65133105 data-v-65133105><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-65133105><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-65133105></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-65133105></path></svg></div><canvas id="vuepress-canvas-cursor"></canvas><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;right:50px;bottom:-70px;width:135px;height:300px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2d_canvas" width="135" height="300" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:135px;height:300px;"></canvas></div></div></div>
    <script src="/blog/assets/js/app.f600c34c.js" defer></script><script src="/blog/assets/js/3.1aae9359.js" defer></script><script src="/blog/assets/js/1.ae8a88ec.js" defer></script><script src="/blog/assets/js/56.1962bc1e.js" defer></script>
  </body>
</html>
