(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{493:function(s,a,t){"use strict";t.r(a);var r=t(2),n=Object(r.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"第二章-hdfs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第二章-hdfs"}},[s._v("#")]),s._v(" 第二章 HDFS")]),s._v(" "),a("h2",{attrs:{id:"_2-1-hdfs-介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-hdfs-介绍"}},[s._v("#")]),s._v(" 2.1 HDFS 介绍")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("分布式文件系统设计思想")]),s._v(" "),a("p",[s._v("用户请求查看数据时会请求主节点，主节点上面会存储维护着所有数据的存储信息，然后用户根据数据所在的节点信息去对应的节点去读取数据，这样压力就进行了分流。")])]),s._v(" "),a("li",[a("p",[s._v("常见的分布式文件系统")]),s._v(" "),a("ul",[a("li",[s._v("GFS(谷歌)")]),s._v(" "),a("li",[s._v("TFS(淘宝)")]),s._v(" "),a("li",[s._v("S3(S3)")])])]),s._v(" "),a("li",[a("p",[s._v("HDFS 定义")]),s._v(" "),a("p",[s._v("HDFS的全称是Hadoop Distributed File System ，Hadoop的 分布式 文件系统,它是一种允许文件通过网络在多台主机上分享的文件系统，可以让多台机器上的多个用户分享文件和存储空间。")])])]),s._v(" "),a("h2",{attrs:{id:"_2-2-hdfs-基础操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-hdfs-基础操作"}},[s._v("#")]),s._v(" 2.2 HDFS 基础操作")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("HDFS shell 格式")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("bin/hdfs dfs "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-xxx")]),s._v(" scheme://authority/path\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("xxx 指具体的命令 ,绝大多数命令和Linux 命令相同 scheme:hdfs quthority:ip:port ，"),a("code",[s._v("scheme://authority/")]),s._v("这个可以省略不写 因为hdfs在执行的时候会根据HDOOP_HOME自动识别配置文件中的fs.defaultFS属性")])])]),s._v(" "),a("li",[a("p",[s._v("HDFS 常用操作")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("hdfs dfs -ls /")]),s._v("查询指定路径信息")]),s._v(" "),a("li",[a("code",[s._v("hdfs dfs -put xxx /")]),s._v("从本地上传文件")]),s._v(" "),a("li",[a("code",[s._v("hdfs dfs -cat /xxx")]),s._v("查看HDFS文件内容")]),s._v(" "),a("li",[a("code",[s._v("hdfs dfs -get /xxx")]),s._v("下载文件到本地")]),s._v(" "),a("li",[a("code",[s._v("hdfs dfs -mkdir -p")]),s._v("创建文件夹")]),s._v(" "),a("li",[a("code",[s._v("hdfs dfs -rm -r")]),s._v("删除文件夹")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询根目录下的文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop-3.2.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hdfs dfs -ls /")]),s._v("\nFound "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" items\n-rw-r--r--   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root    supergroup       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1361")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-05 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":05 /README.txt\ndrwxr-xr-x   - root    supergroup          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-05 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":08 /abc\ndrwxr-xr-x   - root    supergroup          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-06 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":01 /test\n-rw-r--r--   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" Adopat supergroup  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("305555522")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-06 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":46 /user.txt\nYou have new mail "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /var/spool/mail/root\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建文件夹")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop-3.2.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hdfs dfs -mkdir -p /666/777")]),s._v("\nYou have new mail "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /var/spool/mail/root\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 递归显示所有目录的信息，可以在ls后面添加R参数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop-3.2.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hdfs dfs -ls -R /")]),s._v("\ndrwxr-xr-x   - root    supergroup          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-07 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":43 /666\ndrwxr-xr-x   - root    supergroup          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-07 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":43 /666/777\n-rw-r--r--   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root    supergroup       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1361")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-05 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":05 /README.txt\ndrwxr-xr-x   - root    supergroup          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-05 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":08 /abc\ndrwxr-xr-x   - root    supergroup          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-05 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":08 /abc/xyz\ndrwxr-xr-x   - root    supergroup          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-06 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":01 /test\n-rw-r--r--   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" Adopat supergroup  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("305555522")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-06 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":46 /user.txt\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop-3.2.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll")]),s._v("\ntotal "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("188")]),s._v("\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("203")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" bin\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":17 etc\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("106")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" include\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" lib\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" libexec\n-rw-rw-r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("150569")]),s._v(" Oct "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" LICENSE.txt\n-rw-rw-r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22125")]),s._v(" Oct "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" NOTICE.txt\n-rw-rw-r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1361")]),s._v(" Oct "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" README.txt\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1361")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":07 README.txt.bak\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":07 sbin\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" share\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 上传文件 到hdf")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop-3.2.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hdfs dfs -put README.txt.bak /")]),s._v("\nYou have new mail "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /var/spool/mail/root\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 递归查询文件，可以显示子目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop-3.2.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hdfs dfs -ls -R /")]),s._v("\ndrwxr-xr-x   - root    supergroup          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-07 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":43 /666\ndrwxr-xr-x   - root    supergroup          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-07 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":43 /666/777\n-rw-r--r--   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root    supergroup       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1361")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-05 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":05 /README.txt\n-rw-r--r--   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root    supergroup       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1361")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-07 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":44 /README.txt.bak\ndrwxr-xr-x   - root    supergroup          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-05 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":08 /abc\ndrwxr-xr-x   - root    supergroup          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-05 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":08 /abc/xyz\ndrwxr-xr-x   - root    supergroup          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-06 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":01 /test\n-rw-r--r--   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" Adopat supergroup  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("305555522")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-06 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":46 /user.txt\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop-3.2.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hdfs dfs -ls / |grep /|wc -l")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\nYou have new mail "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /var/spool/mail/root\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop-3.2.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hdfs dfs -ls /")]),s._v("\nFound "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" items\ndrwxr-xr-x   - root    supergroup          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-07 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":43 /666\n-rw-r--r--   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root    supergroup       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1361")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-05 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":05 /README.txt\n-rw-r--r--   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root    supergroup       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1361")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-07 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":44 /README.txt.bak\ndrwxr-xr-x   - root    supergroup          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-05 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":08 /abc\ndrwxr-xr-x   - root    supergroup          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-06 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":01 /test\n-rw-r--r--   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" Adopat supergroup  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("305555522")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-06 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":46 /user.txt\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 统计根目录下文件个数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop-3.2.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hdfs dfs -ls /|grep /|wc -l")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop-3.2.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hdfs dfs -ls -R /|grep /|wc -l")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\nYou have new mail "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /var/spool/mail/root\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop-3.2.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hdfs dfs -ls /")]),s._v("\nFound "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" items\ndrwxr-xr-x   - root    supergroup          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-07 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":43 /666\n-rw-r--r--   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root    supergroup       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1361")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-05 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":05 /README.txt\n-rw-r--r--   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root    supergroup       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1361")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-07 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":44 /README.txt.bak\ndrwxr-xr-x   - root    supergroup          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-05 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":08 /abc\ndrwxr-xr-x   - root    supergroup          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-06 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":01 /test\n-rw-r--r--   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" Adopat supergroup  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("305555522")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-06 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":46 /user.txt\nYou have new mail "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /var/spool/mail/root\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除文件夹")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop-3.2.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hdfs dfs -rm -r /666")]),s._v("\nDeleted /666\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop-3.2.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hdfs dfs -ls /      ")]),s._v("\nFound "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" items\n-rw-r--r--   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root    supergroup       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1361")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-05 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":05 /README.txt\n-rw-r--r--   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root    supergroup       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1361")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-07 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":44 /README.txt.bak\ndrwxr-xr-x   - root    supergroup          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-05 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":08 /abc\ndrwxr-xr-x   - root    supergroup          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-06 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":01 /test\n-rw-r--r--   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" Adopat supergroup  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("305555522")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-06 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":46 /user.txt\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop-3.2.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hdfs dfs -get /README.txt.bak README.txt.bak666")]),s._v("\nYou have new mail "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /var/spool/mail/root\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop-3.2.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll")]),s._v("\ntotal "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192")]),s._v("\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("203")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" bin\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":17 etc\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("106")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" include\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" lib\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" libexec\n-rw-rw-r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("150569")]),s._v(" Oct "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" LICENSE.txt\n-rw-rw-r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22125")]),s._v(" Oct "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" NOTICE.txt\n-rw-rw-r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1361")]),s._v(" Oct "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" README.txt\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1361")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":07 README.txt.bak\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1361")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":02 README.txt.bak666\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":07 sbin\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1001")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" share\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop-3.2.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hdfs dfs -ls /README.txt")]),s._v("\n-rw-r--r--   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root supergroup       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1361")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-05 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":05 /README.txt\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop-3.2.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hdfs dfs -cat /README.txt")]),s._v("\nFor the latest information about Hadoop, please visit our website at:\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop-3.2.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"_2-3-java操作hdfs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-java操作hdfs"}},[s._v("#")]),s._v(" 2.3 Java操作HDFS")]),s._v(" "),a("p",[s._v("代码详见github https://github.com/Adopat/hadoop_demo")]),s._v(" "),a("h2",{attrs:{id:"_2-4-hdfs核心进程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-hdfs核心进程"}},[s._v("#")]),s._v(" 2.4 HDFS核心进程")]),s._v(" "),a("p",[s._v("HDFS 核心进程分三个")]),s._v(" "),a("ul",[a("li",[s._v("NameNode")]),s._v(" "),a("li",[s._v("SecondaryNameNode")]),s._v(" "),a("li",[s._v("DataNode")])]),s._v(" "),a("h3",{attrs:{id:"_2-4-1-namenode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-1-namenode"}},[s._v("#")]),s._v(" 2.4.1 NameNode")]),s._v(" "),a("p",[s._v("NameNode是整个文件系统的管理节点，主要功能有以下三个")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("维护整个文件系统的文件目录树")]),s._v(" "),a("blockquote",[a("p",[s._v("表示文件/目录的的一些基本信息，所有者 属组 修改时间 文件大小等信息)")])])]),s._v(" "),a("li",[a("p",[s._v("维护每个文件对应的数据块列表")]),s._v(" "),a("blockquote",[a("p",[s._v("如果一个文件太大，那么在集群中存储的时候会对文件进行切割，这个时候就类似于会给文件分成一块一块的，存储到不同机器上面。所以HDFS还要记录一下一个文件到底被分了多少块，每一块都在什么地方存储着")])])]),s._v(" "),a("li",[a("p",[s._v("负责接收用户的操作请求")]),s._v(" "),a("blockquote",[a("p",[s._v("我们在命令行使用hdfs的时候，需要先和namenode通信才能开始去操作数据)")])])])]),s._v(" "),a("p",[s._v("NameNode主要包含以下文件")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("fsimage")]),s._v(" "),a("p",[s._v("元数据镜像文件，存储某一时刻NameNode内存中的元数据信息，就类似是定时做了一个快照操作。【这里的元数据信息是指文件目录树、文件/目录的信息、每个文件对应的数据块列表】")])]),s._v(" "),a("li",[a("p",[s._v("edits")]),s._v(" "),a("p",[s._v("操作日志文件【事务文件】，这里面会实时记录用户的所有操作。,我们所有对hdfs的增删改操作都会在edits文件中留下信息，edits文件会定期合并到fsimage文件中(SecondaryNameNode的作用)")])]),s._v(" "),a("li",[a("p",[s._v("seen_txid")]),s._v(" "),a("p",[s._v("是存放transactionId的文件，format之后是0，它代表的是namenode里面的edits_*文件的尾数,namenode重启的时候，会按照seen_txid的数字，顺序从头跑edits_0000001~到seen_txid的数字。如果根据对应的seen_txid无法加载到对应的文件，NameNode进程将不会完成启动以保护数据一致性。")])]),s._v(" "),a("li",[a("p",[s._v("VERSION")]),s._v(" "),a("p",[s._v("保存了集群的版本信息，这里面显示的集群的一些信息、当重新对hdfs格式化 之后，这里面的信息会变化。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat VERSION ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Wed Apr 08 20:30:00 CST 2020 ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("namespaceID")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("498554338")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("clusterID")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("CID-cc0792dd-a861-4a3f-9151-b0695e4c7e70 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cTime")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1586268855170")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("storageType")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("NAME_NODE \n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("blockpoolID")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("BP-1517789416-192.168.35.100-1586268855170 \n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("layoutVersion")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-65\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("blockquote",[a("p",[s._v("hdfs 格式化 会改变clusterID,导致和从节点不一致，所以不建议重复格式化，是在要格式化 删除 /data/hadoop_repo 也就是NameNode 文件的存放路径")])])])]),s._v(" "),a("p",[s._v("NameNode 存放目录")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("dfs.namenode.name.dir"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("file://"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${hadoop.tmp.dir}")]),s._v("/dfs/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("description"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Determines where on the "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v(" filesystem the DFS name "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v("\n      should store the name table"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fsimage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".  If this is a comma-delimited list\n      of directories "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" the name table is replicated "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" all of the\n      directories, "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" redundancy. "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/description"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("blockquote",[a("p",[s._v("默认 hdfs-default.xml(hadoop-3.2.0\\share\\hadoop\\hdfs\\hadoop-hdfs-3.2.0.jar) 属性中定义了namenode文件存放路径，但是我们在配置了core-site.xml 中重新定义了存放路径，对原始属性进行了覆盖")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop-3.2.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat etc/hadoop/core-site.xml")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("configuration"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("fs.defaultFS"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("hdfs://bigdata01:900"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v("<")]),s._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("hadoop.tmp.dir"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/data/hadoop_repo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/configuration"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nYou have new mail "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /var/spool/mail/root\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("blockquote",[a("p",[s._v("所以目前 nanenode的存放路径就是 /data/hadoop_repo/dfs/name")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":40 edits_0000000000000000001-0000000000000000001\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("748")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":21 edits_0000000000000000002-0000000000000000012\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":21 edits_0000000000000000013-0000000000000000014\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":21 edits_0000000000000000015-0000000000000000016\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":21 edits_0000000000000000017-0000000000000000017\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":14 edits_0000000000000000018-0000000000000000019\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":14 edits_0000000000000000020-0000000000000000021\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":14 edits_0000000000000000022-0000000000000000022\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":05 edits_0000000000000000023-0000000000000000024\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4200")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":05 edits_0000000000000000025-0000000000000000092\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":05 edits_0000000000000000093-0000000000000000094\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":05 edits_0000000000000000095-0000000000000000096\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":05 edits_0000000000000000097-0000000000000000098\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":05 edits_0000000000000000099-0000000000000000099\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" 09:46 edits_0000000000000000100-0000000000000000101\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" 09:46 edits_0000000000000000102-0000000000000000102\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":16 edits_0000000000000000103-0000000000000000104\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(":16 edits_0000000000000000105-0000000000000000105\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":41 edits_0000000000000000106-0000000000000000107\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("796")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":41 edits_0000000000000000108-0000000000000000119\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":41 edits_0000000000000000120-0000000000000000121\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":41 edits_0000000000000000122-0000000000000000122\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":22 edits_0000000000000000123-0000000000000000124\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":22 edits_inprogress_0000000000000000125\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("874")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":21 fsimage_0000000000000000122\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("62")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":21 fsimage_0000000000000000122.md5\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("874")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":22 fsimage_0000000000000000124\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("62")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":22 fsimage_0000000000000000124.md5\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":22 seen_txid\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("219")]),s._v(" Jan  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":21 VERSION\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pwd")]),s._v("\n/data/hadoop_repo/dfs/name/current\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br")])]),a("blockquote",[a("p",[s._v("namenode 文件存放路径，fsimage 文件解析https://blog.csdn.net/baidu_31618421/article/details/107218846")])]),s._v(" "),a("h3",{attrs:{id:"_2-4-2-secondarynamenode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-2-secondarynamenode"}},[s._v("#")]),s._v(" 2.4.2 SecondaryNameNode")]),s._v(" "),a("p",[s._v("SecondaryNameNode 的主要功能是负责定期把edits 文件中的内容合并到fsimage中这个合并操作称为checkpoint，在合并的时候会对edits中的内容进行转换，生成新的内容保存到fsimage文件中。")]),s._v(" "),a("blockquote",[a("p",[s._v("注意：在NameNode的HA(High Avariable)架构中没有SecondaryNameNode进程，文件合并操作会由standbyNameNode负责实现\n所以在Hadoop集群中，SecondaryNameNode进程并不是必须的。")])]),s._v(" "),a("h3",{attrs:{id:"_2-4-3-datanode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-3-datanode"}},[s._v("#")]),s._v(" 2.4.3 DataNode")]),s._v(" "),a("p",[s._v("DateNode是提供真实文件数据的存储服务。")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("block")]),s._v(" "),a("p",[s._v("HDFS会按照固定的大小，顺序对文件进行划分并编号，划分好的每一个块称一个Block，"),a("strong",[s._v("HDFS默认Block大小是 128MB")]),s._v("\nBlokc块是HDFS读写数据的基本单位，不管你的文件是文本文件 还是视频 或者音频文件，针对hdfs而言都是字节。")])]),s._v(" "),a("li",[a("p",[s._v("replication")]),s._v(" "),a("p",[s._v("备份在hdfs-site.xml中进行配置(df.replication),默认这个参数的配置是3")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hdfs-site.xml 中对dfs.replication 进行覆盖")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("configuration"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("dfs.replication"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v("<")]),s._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("dfs.namenode.secondary.http-address"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("bigdata01:5009"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v("<")]),s._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("dfs.permissions.enabled"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("false"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/configuration"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pwd")]),s._v("\n/data/soft/hadoop-3.2.0/etc/hadoop\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在 hdfs-default.xml 中默认是3")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("dfs.replication"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("3")]),s._v("<")]),s._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("description"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Default block replication. \n  The actual number of replications can be specified when the "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" is created.\n  The default is used "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" replication is not specified "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" create time.\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/description"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"_2-4-4-总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-4-总结"}},[s._v("#")]),s._v(" 2.4.4 总结")]),s._v(" "),a("p",[s._v("如何找到文件，用户请求数据，NameNode 接收用户请求，根据fsimage(edits)文件中保存的文件和block 块的信息，找到对应的block,通过block 找到对应的datanode.。datanode 存储了真正的数据信息。")]),s._v(" "),a("p",[s._v("NameNode维护了两份关系：\n第一份关系：file 与block list的关系，对应的关系信息存储在fsimage和edits文件中,当NameNode启动的时候会把文件中的元数据信息加载到内存中\n第二份关系：datanode与block的关系，对应的关系主要在集群启动的时候保存在内存中,当DataNode启动时会把当前节点上的Block信息和节点信息上报给NameNode")]),s._v(" "),a("blockquote",[a("p",[s._v("HDFS不适合存储小文件，其实主要原因就在这里，不管是大文件还是小文件，一个文件的元数据信息在NameNode中都会占用150字节，NameNode节点的内存是有限的，所以它的存储能力也是有限的，如果我们存储了一堆都是几KB的小文件，最后发现NameNode的内存占满了，确实存储了很多文件，但是文件的总体大小却很小，这样就失去了HDFS存在的价值。")])]),s._v(" "),a("h2",{attrs:{id:"_2-5hdfs-高级"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5hdfs-高级"}},[s._v("#")]),s._v(" 2.5HDFS 高级")]),s._v(" "),a("h3",{attrs:{id:"_2-5-1-hdfs的回收站"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-1-hdfs的回收站"}},[s._v("#")]),s._v(" 2.5.1 HDFS的回收站")]),s._v(" "),a("p",[s._v("回收站的数据，有一个生存周期,默认HDFS的回收站是没有开启的。")]),s._v(" "),a("p",[a("strong",[s._v("HDFS回收站配置")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1.修改配置core-site.xml")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pwd")]),s._v("\n/data/soft/hadoop-3.2.0/etc/hadoop\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vi core-site.xml ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("configuration"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("fs.defaultFS"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("hdfs://bigdata01:900"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v("<")]),s._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("hadoop.tmp.dir"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/data/hadoop_repo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启回收站 value单位是分钟 1440指的是回收站保存一天，超过时间自动删除")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("fs.trash.interval"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("144")]),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v("<")]),s._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/configuration"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2.将配置同步到剩余的节点信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pwd")]),s._v("\n/data/soft/hadoop-3.2.0/etc/hadoop\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# scp -rq core-site.xml bigdata02:/data/soft/hadoop-3.2.0/etc/hadoop")]),s._v("\nYou have new mail "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /var/spool/mail/root\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# scp -rq core-site.xml bigdata03:/data/soft/hadoop-3.2.0/etc/hadoop")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3.删除文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop-3.2.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hdfs dfs -rm -r -f /README_DELETE.txt")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-10 09:20:42,084 INFO fs.TrashPolicyDefault: Moved: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hdfs://bigdata01:9000/README_DELETE.txt'")]),s._v(" to trash at: hdfs://bigdata01:9000/user/root/.Trash/Current/README_DELETE.txt1641777642074\nYou have new mail "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /var/spool/mail/root\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 4.查看删除文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop-3.2.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hdfs dfs -ls  /user/root/.Trash/Current/  ")]),s._v("\nFound "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" items\n-rw-r--r--   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root supergroup       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1361")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-10 09:15 /user/root/.Trash/Current/README_DELETE.txt\n-rw-r--r--   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root supergroup       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1361")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-01-10 09:17 /user/root/.Trash/Current/README_DELETE.txt1641777642074\nYou have new mail "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /var/spool/mail/root\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br")])]),a("blockquote",[a("p",[s._v("在修改配置之前，需要先停止集群，")]),s._v(" "),a("p",[s._v("注意：如果删除的文件过大，超过回收站大小的话会提示删除失败\n需要指定参数 -skipTrash ，指定这个参数表示删除的文件不会进回收站")]),s._v(" "),a("p",[a("code",[s._v("[root@bigdata01 hadoop-3.2.0]# hdfs dfs -rm -r -skipTrash /README.txt")])]),s._v(" "),a("p",[a("code",[s._v("Deleted /user.txt")])])]),s._v(" "),a("h3",{attrs:{id:"_2-5-2-hdfs的安全模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-2-hdfs的安全模式"}},[s._v("#")]),s._v(" 2.5.2 HDFS的安全模式")]),s._v(" "),a("p",[s._v("集群刚启动的时候会进入一种无法上传或者删除文件的状态，这种状态称为HDFS的安全模式。，因为在集群每次重新启动的时候，HDFS都会检查集群中文件信息是否完整，例如副本是否缺少之类的信息，所以这个时间段内是不允许对集群有修改操作的。")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("查看是否安全模式")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop-3.2.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hdfs dfsadmin -safemode get")]),s._v("\nSafe mode is OFF\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("离开安全模式")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 hadoop-3.2.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hdfs dfsadmin -safemode leave Safe mode is OFF")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"_2-5-3-实时上传数据至hdfs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-3-实时上传数据至hdfs"}},[s._v("#")]),s._v(" 2.5.3 实时上传数据至HDFS")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("需求")]),s._v(" "),a("p",[s._v("在实际工作中会有定时上传数据到HDFS的需求，我们有一个web项目每天都会产生日志文件，日志文件的格式为access_2022_01_01.log这种格式的，每天产生一个，我们需要每天凌晨将昨天生成的日志文件上传至HDFS上，按天分目录存储，HDFS上的目录格式为20220101")])]),s._v(" "),a("li",[a("p",[s._v("实现思路")]),s._v(" "),a("p",[s._v("第一步：我们需要获取到昨天日志文件的名称\n第二步：在HDFS上面使用昨天的日期创建目录\n第三步：将昨天的日志文件上传到刚创建的HDFS目录中\n第四步：要考虑到脚本重跑，补数据的情况\n第五步：配置crontab任务")])]),s._v(" "),a("li",[a("p",[s._v("实现代码")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 shell"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat uploadLogData.sh ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1.获取昨天日期字符串")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 考虑到脚本重跑补数据情况")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("yesterday")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$yesterday")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("yesterday")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" +%Y_%m_%d "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--date")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1 days ago"')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 拼接日志文件路径信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("logPath")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/data/log/access_"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${yesterday}")]),s._v(".log\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将日期中的_去除")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("hdfsPath")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/log/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${yesterday"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("_"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在hdfs 中创建目录")]),s._v("\nhdfs dfs "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-mkdir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${hdfsPath}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将数据上传至hdfs的指定目录中")]),s._v("\nhdfs dfs "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-put")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${logPath}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${hdfsPath}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置crontabl 任务，每天凌晨1点执行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 shell"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bigdata01 shell"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vi /etc/crontab 0 1 * * * root sh /data/shell/uploadLogData.sh >> /data/shell/uploadLogData.log")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"_2-5-4-ha-高可用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-4-ha-高可用"}},[s._v("#")]),s._v(" 2.5.4 HA 高可用")]),s._v(" "),a("p",[s._v("High Available，指的是NameNode 一主多备，在这里明确JN(JournalNodes集群用于同步edits信息(静态))，DateNode 需要向所有的NameNode 发送block 与节点信息(动态)，Zookeeper 集群可以用来自动切换ActiveNameNode。HA解决了NameNode 的单点故障问题。")]),s._v(" "),a("p",[a("img",{attrs:{src:"/blog/Hadoop%E7%94%9F%E6%80%81%E4%BD%93%E7%B3%BB.assets/image-20220110151231521.png",alt:"image-20220110151231521"}})]),s._v(" "),a("blockquote",[a("p",[s._v("注意在HA架构中没有SecondaryNameNode,合并edits 文件到fsimage中的操作由NameNodeStandBy完成。")])]),s._v(" "),a("h3",{attrs:{id:"_2-5-5-federatione高扩展"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-5-federatione高扩展"}},[s._v("#")]),s._v(" 2.5.5 Federatione高扩展")]),s._v(" "),a("p",[s._v("高扩展一般和HA联合起来使用。高扩展带来的好处。")]),s._v(" "),a("ol",[a("li",[s._v("HDFS集群扩展性。多个NameNode分管一部分目录，使得一个集群可以扩展到更多节点，不再因内存的限制制约文件存储数目。")]),s._v(" "),a("li",[s._v("性能更高效。多个NameNode管理不同的数据，且同时对外提供服务，将为用户提供更高的读写吞吐率。")]),s._v(" "),a("li",[s._v("良好的隔离性。用户可根据需要将不同业务数据交由不同NameNode管理，这样不同业务之间影响很小。")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/blog/Hadoop%E7%94%9F%E6%80%81%E4%BD%93%E7%B3%BB.assets/image-20220110151427216.png",alt:"image-20220110151427216"}})])])}),[],!1,null,null,null);a.default=n.exports}}]);